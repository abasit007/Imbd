{"ast":null,"code":"/*\r\n * easy-autocomplete\r\n * jQuery plugin for autocompletion\r\n * \r\n * @author Łukasz Pawełczak (http://github.com/pawelczak)\r\n * @version 1.3.5\r\n * Copyright  License: \r\n */\n\n/*\r\n * EasyAutocomplete - Configuration \r\n */\nvar EasyAutocomplete = function (scope) {\n  scope.Configuration = function Configuration(options) {\n    var defaults = {\n      data: \"list-required\",\n      url: \"list-required\",\n      dataType: \"json\",\n      listLocation: function listLocation(data) {\n        return data;\n      },\n      xmlElementName: \"\",\n      getValue: function getValue(element) {\n        return element;\n      },\n      autocompleteOff: true,\n      placeholder: false,\n      ajaxCallback: function ajaxCallback() {},\n      matchResponseProperty: false,\n      list: {\n        sort: {\n          enabled: false,\n          method: function method(a, b) {\n            a = defaults.getValue(a);\n            b = defaults.getValue(b);\n\n            if (a < b) {\n              return -1;\n            }\n\n            if (a > b) {\n              return 1;\n            }\n\n            return 0;\n          }\n        },\n        maxNumberOfElements: 6,\n        hideOnEmptyPhrase: true,\n        match: {\n          enabled: false,\n          caseSensitive: false,\n          method: function method(element, phrase) {\n            if (element.search(phrase) > -1) {\n              return true;\n            } else {\n              return false;\n            }\n          }\n        },\n        showAnimation: {\n          type: \"normal\",\n          //normal|slide|fade\n          time: 400,\n          callback: function callback() {}\n        },\n        hideAnimation: {\n          type: \"normal\",\n          time: 400,\n          callback: function callback() {}\n        },\n\n        /* Events */\n        onClickEvent: function onClickEvent() {},\n        onSelectItemEvent: function onSelectItemEvent() {},\n        onLoadEvent: function onLoadEvent() {},\n        onChooseEvent: function onChooseEvent() {},\n        onKeyEnterEvent: function onKeyEnterEvent() {},\n        onMouseOverEvent: function onMouseOverEvent() {},\n        onMouseOutEvent: function onMouseOutEvent() {},\n        onShowListEvent: function onShowListEvent() {},\n        onHideListEvent: function onHideListEvent() {}\n      },\n      highlightPhrase: true,\n      theme: \"\",\n      cssClasses: \"\",\n      minCharNumber: 0,\n      requestDelay: 0,\n      adjustWidth: true,\n      ajaxSettings: {},\n      preparePostData: function preparePostData(data, inputPhrase) {\n        return data;\n      },\n      loggerEnabled: true,\n      template: \"\",\n      categoriesAssigned: false,\n      categories: [{\n        maxNumberOfElements: 4\n      }]\n    };\n    var externalObjects = [\"ajaxSettings\", \"template\"];\n\n    this.get = function (propertyName) {\n      return defaults[propertyName];\n    };\n\n    this.equals = function (name, value) {\n      if (isAssigned(name)) {\n        if (defaults[name] === value) {\n          return true;\n        }\n      }\n\n      return false;\n    };\n\n    this.checkDataUrlProperties = function () {\n      if (defaults.url === \"list-required\" && defaults.data === \"list-required\") {\n        return false;\n      }\n\n      return true;\n    };\n\n    this.checkRequiredProperties = function () {\n      for (var propertyName in defaults) {\n        if (defaults[propertyName] === \"required\") {\n          logger.error(\"Option \" + propertyName + \" must be defined\");\n          return false;\n        }\n      }\n\n      return true;\n    };\n\n    this.printPropertiesThatDoesntExist = function (consol, optionsToCheck) {\n      printPropertiesThatDoesntExist(consol, optionsToCheck);\n    };\n\n    prepareDefaults();\n    mergeOptions();\n\n    if (defaults.loggerEnabled === true) {\n      printPropertiesThatDoesntExist(console, options);\n    }\n\n    addAjaxSettings();\n    processAfterMerge();\n\n    function prepareDefaults() {\n      if (options.dataType === \"xml\") {\n        if (!options.getValue) {\n          options.getValue = function (element) {\n            return $(element).text();\n          };\n        }\n\n        if (!options.list) {\n          options.list = {};\n        }\n\n        if (!options.list.sort) {\n          options.list.sort = {};\n        }\n\n        options.list.sort.method = function (a, b) {\n          a = options.getValue(a);\n          b = options.getValue(b);\n\n          if (a < b) {\n            return -1;\n          }\n\n          if (a > b) {\n            return 1;\n          }\n\n          return 0;\n        };\n\n        if (!options.list.match) {\n          options.list.match = {};\n        }\n\n        options.list.match.method = function (element, phrase) {\n          if (element.search(phrase) > -1) {\n            return true;\n          } else {\n            return false;\n          }\n        };\n      }\n\n      if (options.categories !== undefined && options.categories instanceof Array) {\n        var categories = [];\n\n        for (var i = 0, length = options.categories.length; i < length; i += 1) {\n          var category = options.categories[i];\n\n          for (var property in defaults.categories[0]) {\n            if (category[property] === undefined) {\n              category[property] = defaults.categories[0][property];\n            }\n          }\n\n          categories.push(category);\n        }\n\n        options.categories = categories;\n      }\n    }\n\n    function mergeOptions() {\n      defaults = mergeObjects(defaults, options);\n\n      function mergeObjects(source, target) {\n        var mergedObject = source || {};\n\n        for (var propertyName in source) {\n          if (target[propertyName] !== undefined && target[propertyName] !== null) {\n            if (typeof target[propertyName] !== \"object\" || target[propertyName] instanceof Array) {\n              mergedObject[propertyName] = target[propertyName];\n            } else {\n              mergeObjects(source[propertyName], target[propertyName]);\n            }\n          }\n        }\n        /* If data is an object */\n\n\n        if (target.data !== undefined && target.data !== null && typeof target.data === \"object\") {\n          mergedObject.data = target.data;\n        }\n\n        return mergedObject;\n      }\n    }\n\n    function processAfterMerge() {\n      if (defaults.url !== \"list-required\" && typeof defaults.url !== \"function\") {\n        var defaultUrl = defaults.url;\n\n        defaults.url = function () {\n          return defaultUrl;\n        };\n      }\n\n      if (defaults.ajaxSettings.url !== undefined && typeof defaults.ajaxSettings.url !== \"function\") {\n        var defaultUrl = defaults.ajaxSettings.url;\n\n        defaults.ajaxSettings.url = function () {\n          return defaultUrl;\n        };\n      }\n\n      if (typeof defaults.listLocation === \"string\") {\n        var defaultlistLocation = defaults.listLocation;\n\n        if (defaults.dataType.toUpperCase() === \"XML\") {\n          defaults.listLocation = function (data) {\n            return $(data).find(defaultlistLocation);\n          };\n        } else {\n          defaults.listLocation = function (data) {\n            return data[defaultlistLocation];\n          };\n        }\n      }\n\n      if (typeof defaults.getValue === \"string\") {\n        var defaultsGetValue = defaults.getValue;\n\n        defaults.getValue = function (element) {\n          return element[defaultsGetValue];\n        };\n      }\n\n      if (options.categories !== undefined) {\n        defaults.categoriesAssigned = true;\n      }\n    }\n\n    function addAjaxSettings() {\n      if (options.ajaxSettings !== undefined && typeof options.ajaxSettings === \"object\") {\n        defaults.ajaxSettings = options.ajaxSettings;\n      } else {\n        defaults.ajaxSettings = {};\n      }\n    }\n\n    function isAssigned(name) {\n      if (defaults[name] !== undefined && defaults[name] !== null) {\n        return true;\n      } else {\n        return false;\n      }\n    }\n\n    function printPropertiesThatDoesntExist(consol, optionsToCheck) {\n      checkPropertiesIfExist(defaults, optionsToCheck);\n\n      function checkPropertiesIfExist(source, target) {\n        for (var property in target) {\n          if (source[property] === undefined) {\n            consol.log(\"Property '\" + property + \"' does not exist in EasyAutocomplete options API.\");\n          }\n\n          if (typeof source[property] === \"object\" && $.inArray(property, externalObjects) === -1) {\n            checkPropertiesIfExist(source[property], target[property]);\n          }\n        }\n      }\n    }\n  };\n\n  return scope;\n}(EasyAutocomplete || {});\n/*\r\n * EasyAutocomplete - Logger \r\n */\n\n\nvar EasyAutocomplete = function (scope) {\n  scope.Logger = function Logger() {\n    this.error = function (message) {\n      console.log(\"ERROR: \" + message);\n    };\n\n    this.warning = function (message) {\n      console.log(\"WARNING: \" + message);\n    };\n  };\n\n  return scope;\n}(EasyAutocomplete || {});\n/*\r\n * EasyAutocomplete - Constans\r\n */\n\n\nvar EasyAutocomplete = function (scope) {\n  scope.Constans = function Constans() {\n    var constants = {\n      CONTAINER_CLASS: \"easy-autocomplete-container\",\n      CONTAINER_ID: \"eac-container-\",\n      WRAPPER_CSS_CLASS: \"easy-autocomplete\"\n    };\n\n    this.getValue = function (propertyName) {\n      return constants[propertyName];\n    };\n  };\n\n  return scope;\n}(EasyAutocomplete || {});\n/*\r\n * EasyAutocomplete - ListBuilderService \r\n *\r\n * @author Łukasz Pawełczak \r\n *\r\n */\n\n\nvar EasyAutocomplete = function (scope) {\n  scope.ListBuilderService = function ListBuilderService(configuration, proccessResponseData) {\n    this.init = function (data) {\n      var listBuilder = [],\n          builder = {};\n      builder.data = configuration.get(\"listLocation\")(data);\n      builder.getValue = configuration.get(\"getValue\");\n      builder.maxListSize = configuration.get(\"list\").maxNumberOfElements;\n      listBuilder.push(builder);\n      return listBuilder;\n    };\n\n    this.updateCategories = function (listBuilder, data) {\n      if (configuration.get(\"categoriesAssigned\")) {\n        listBuilder = [];\n\n        for (var i = 0; i < configuration.get(\"categories\").length; i += 1) {\n          var builder = convertToListBuilder(configuration.get(\"categories\")[i], data);\n          listBuilder.push(builder);\n        }\n      }\n\n      return listBuilder;\n    };\n\n    this.convertXml = function (listBuilder) {\n      if (configuration.get(\"dataType\").toUpperCase() === \"XML\") {\n        for (var i = 0; i < listBuilder.length; i += 1) {\n          listBuilder[i].data = convertXmlToList(listBuilder[i]);\n        }\n      }\n\n      return listBuilder;\n    };\n\n    this.processData = function (listBuilder, inputPhrase) {\n      for (var i = 0, length = listBuilder.length; i < length; i += 1) {\n        listBuilder[i].data = proccessResponseData(configuration, listBuilder[i], inputPhrase);\n      }\n\n      return listBuilder;\n    };\n\n    this.checkIfDataExists = function (listBuilders) {\n      for (var i = 0, length = listBuilders.length; i < length; i += 1) {\n        if (listBuilders[i].data !== undefined && listBuilders[i].data instanceof Array) {\n          if (listBuilders[i].data.length > 0) {\n            return true;\n          }\n        }\n      }\n\n      return false;\n    };\n\n    function convertToListBuilder(category, data) {\n      var builder = {};\n\n      if (configuration.get(\"dataType\").toUpperCase() === \"XML\") {\n        builder = convertXmlToListBuilder();\n      } else {\n        builder = convertDataToListBuilder();\n      }\n\n      if (category.header !== undefined) {\n        builder.header = category.header;\n      }\n\n      if (category.maxNumberOfElements !== undefined) {\n        builder.maxNumberOfElements = category.maxNumberOfElements;\n      }\n\n      if (configuration.get(\"list\").maxNumberOfElements !== undefined) {\n        builder.maxListSize = configuration.get(\"list\").maxNumberOfElements;\n      }\n\n      if (category.getValue !== undefined) {\n        if (typeof category.getValue === \"string\") {\n          var defaultsGetValue = category.getValue;\n\n          builder.getValue = function (element) {\n            return element[defaultsGetValue];\n          };\n        } else if (typeof category.getValue === \"function\") {\n          builder.getValue = category.getValue;\n        }\n      } else {\n        builder.getValue = configuration.get(\"getValue\");\n      }\n\n      return builder;\n\n      function convertXmlToListBuilder() {\n        var builder = {},\n            listLocation;\n\n        if (category.xmlElementName !== undefined) {\n          builder.xmlElementName = category.xmlElementName;\n        }\n\n        if (category.listLocation !== undefined) {\n          listLocation = category.listLocation;\n        } else if (configuration.get(\"listLocation\") !== undefined) {\n          listLocation = configuration.get(\"listLocation\");\n        }\n\n        if (listLocation !== undefined) {\n          if (typeof listLocation === \"string\") {\n            builder.data = $(data).find(listLocation);\n          } else if (typeof listLocation === \"function\") {\n            builder.data = listLocation(data);\n          }\n        } else {\n          builder.data = data;\n        }\n\n        return builder;\n      }\n\n      function convertDataToListBuilder() {\n        var builder = {};\n\n        if (category.listLocation !== undefined) {\n          if (typeof category.listLocation === \"string\") {\n            builder.data = data[category.listLocation];\n          } else if (typeof category.listLocation === \"function\") {\n            builder.data = category.listLocation(data);\n          }\n        } else {\n          builder.data = data;\n        }\n\n        return builder;\n      }\n    }\n\n    function convertXmlToList(builder) {\n      var simpleList = [];\n\n      if (builder.xmlElementName === undefined) {\n        builder.xmlElementName = configuration.get(\"xmlElementName\");\n      }\n\n      $(builder.data).find(builder.xmlElementName).each(function () {\n        simpleList.push(this);\n      });\n      return simpleList;\n    }\n  };\n\n  return scope;\n}(EasyAutocomplete || {});\n/*\r\n * EasyAutocomplete - Data proccess module\r\n *\r\n * Process list to display:\r\n * - sort \r\n * - decrease number to specific number\r\n * - show only matching list\r\n *\r\n */\n\n\nvar EasyAutocomplete = function (scope) {\n  scope.proccess = function proccessData(config, listBuilder, phrase) {\n    scope.proccess.match = match;\n    var list = listBuilder.data,\n        inputPhrase = phrase; //TODO REFACTOR\n\n    list = findMatch(list, inputPhrase);\n    list = reduceElementsInList(list);\n    list = sort(list);\n    return list;\n\n    function findMatch(list, phrase) {\n      var preparedList = [],\n          value = \"\";\n\n      if (config.get(\"list\").match.enabled) {\n        for (var i = 0, length = list.length; i < length; i += 1) {\n          value = config.get(\"getValue\")(list[i]);\n\n          if (match(value, phrase)) {\n            preparedList.push(list[i]);\n          }\n        }\n      } else {\n        preparedList = list;\n      }\n\n      return preparedList;\n    }\n\n    function match(value, phrase) {\n      if (!config.get(\"list\").match.caseSensitive) {\n        if (typeof value === \"string\") {\n          value = value.toLowerCase();\n        }\n\n        phrase = phrase.toLowerCase();\n      }\n\n      if (config.get(\"list\").match.method(value, phrase)) {\n        return true;\n      } else {\n        return false;\n      }\n    }\n\n    function reduceElementsInList(list) {\n      if (listBuilder.maxNumberOfElements !== undefined && list.length > listBuilder.maxNumberOfElements) {\n        list = list.slice(0, listBuilder.maxNumberOfElements);\n      }\n\n      return list;\n    }\n\n    function sort(list) {\n      if (config.get(\"list\").sort.enabled) {\n        list.sort(config.get(\"list\").sort.method);\n      }\n\n      return list;\n    }\n  };\n\n  return scope;\n}(EasyAutocomplete || {});\n/*\r\n * EasyAutocomplete - Template \r\n *\r\n * \r\n *\r\n */\n\n\nvar EasyAutocomplete = function (scope) {\n  scope.Template = function Template(options) {\n    var genericTemplates = {\n      basic: {\n        type: \"basic\",\n        method: function method(element) {\n          return element;\n        },\n        cssClass: \"\"\n      },\n      description: {\n        type: \"description\",\n        fields: {\n          description: \"description\"\n        },\n        method: function method(element) {\n          return element + \" - description\";\n        },\n        cssClass: \"eac-description\"\n      },\n      iconLeft: {\n        type: \"iconLeft\",\n        fields: {\n          icon: \"\"\n        },\n        method: function method(element) {\n          return element;\n        },\n        cssClass: \"eac-icon-left\"\n      },\n      iconRight: {\n        type: \"iconRight\",\n        fields: {\n          iconSrc: \"\"\n        },\n        method: function method(element) {\n          return element;\n        },\n        cssClass: \"eac-icon-right\"\n      },\n      links: {\n        type: \"links\",\n        fields: {\n          link: \"\"\n        },\n        method: function method(element) {\n          return element;\n        },\n        cssClass: \"\"\n      },\n      custom: {\n        type: \"custom\",\n        method: function method() {},\n        cssClass: \"\"\n      }\n    },\n\n    /*\r\n     * Converts method with {{text}} to function\r\n     */\n    convertTemplateToMethod = function convertTemplateToMethod(template) {\n      var _fields = template.fields,\n          buildMethod;\n\n      if (template.type === \"description\") {\n        buildMethod = genericTemplates.description.method;\n\n        if (typeof _fields.description === \"string\") {\n          buildMethod = function buildMethod(elementValue, element) {\n            return elementValue + \" - <span>\" + element[_fields.description] + \"</span>\";\n          };\n        } else if (typeof _fields.description === \"function\") {\n          buildMethod = function buildMethod(elementValue, element) {\n            return elementValue + \" - <span>\" + _fields.description(element) + \"</span>\";\n          };\n        }\n\n        return buildMethod;\n      }\n\n      if (template.type === \"iconRight\") {\n        if (typeof _fields.iconSrc === \"string\") {\n          buildMethod = function buildMethod(elementValue, element) {\n            return elementValue + \"<img class='eac-icon' src='\" + element[_fields.iconSrc] + \"' />\";\n          };\n        } else if (typeof _fields.iconSrc === \"function\") {\n          buildMethod = function buildMethod(elementValue, element) {\n            return elementValue + \"<img class='eac-icon' src='\" + _fields.iconSrc(element) + \"' />\";\n          };\n        }\n\n        return buildMethod;\n      }\n\n      if (template.type === \"iconLeft\") {\n        if (typeof _fields.iconSrc === \"string\") {\n          buildMethod = function buildMethod(elementValue, element) {\n            return \"<img class='eac-icon' src='\" + element[_fields.iconSrc] + \"' />\" + elementValue;\n          };\n        } else if (typeof _fields.iconSrc === \"function\") {\n          buildMethod = function buildMethod(elementValue, element) {\n            return \"<img class='eac-icon' src='\" + _fields.iconSrc(element) + \"' />\" + elementValue;\n          };\n        }\n\n        return buildMethod;\n      }\n\n      if (template.type === \"links\") {\n        if (typeof _fields.link === \"string\") {\n          buildMethod = function buildMethod(elementValue, element) {\n            return \"<a href='\" + element[_fields.link] + \"' >\" + elementValue + \"</a>\";\n          };\n        } else if (typeof _fields.link === \"function\") {\n          buildMethod = function buildMethod(elementValue, element) {\n            return \"<a href='\" + _fields.link(element) + \"' >\" + elementValue + \"</a>\";\n          };\n        }\n\n        return buildMethod;\n      }\n\n      if (template.type === \"custom\") {\n        return template.method;\n      }\n\n      return genericTemplates.basic.method;\n    },\n        prepareBuildMethod = function prepareBuildMethod(options) {\n      if (!options || !options.type) {\n        return genericTemplates.basic.method;\n      }\n\n      if (options.type && genericTemplates[options.type]) {\n        return convertTemplateToMethod(options);\n      } else {\n        return genericTemplates.basic.method;\n      }\n    },\n        templateClass = function templateClass(options) {\n      var emptyStringFunction = function emptyStringFunction() {\n        return \"\";\n      };\n\n      if (!options || !options.type) {\n        return emptyStringFunction;\n      }\n\n      if (options.type && genericTemplates[options.type]) {\n        return function () {\n          var _cssClass = genericTemplates[options.type].cssClass;\n          return function () {\n            return _cssClass;\n          };\n        }();\n      } else {\n        return emptyStringFunction;\n      }\n    };\n\n    this.getTemplateClass = templateClass(options);\n    this.build = prepareBuildMethod(options);\n  };\n\n  return scope;\n}(EasyAutocomplete || {});\n/*\r\n * EasyAutocomplete - jQuery plugin for autocompletion\r\n *\r\n */\n\n\nvar EasyAutocomplete = function (scope) {\n  scope.main = function Core($input, options) {\n    var module = {\n      name: \"EasyAutocomplete\",\n      shortcut: \"eac\"\n    };\n    var consts = new scope.Constans(),\n        config = new scope.Configuration(options),\n        logger = new scope.Logger(),\n        template = new scope.Template(options.template),\n        listBuilderService = new scope.ListBuilderService(config, scope.proccess),\n        checkParam = config.equals,\n        $field = $input,\n        $container = \"\",\n        elementsList = [],\n        selectedElement = -1,\n        requestDelayTimeoutId;\n    scope.consts = consts;\n\n    this.getConstants = function () {\n      return consts;\n    };\n\n    this.getConfiguration = function () {\n      return config;\n    };\n\n    this.getContainer = function () {\n      return $container;\n    };\n\n    this.getSelectedItemIndex = function () {\n      return selectedElement;\n    };\n\n    this.getItems = function () {\n      return elementsList;\n    };\n\n    this.getItemData = function (index) {\n      if (elementsList.length < index || elementsList[index] === undefined) {\n        return -1;\n      } else {\n        return elementsList[index];\n      }\n    };\n\n    this.getSelectedItemData = function () {\n      return this.getItemData(selectedElement);\n    };\n\n    this.build = function () {\n      prepareField();\n    };\n\n    this.init = function () {\n      init();\n    };\n\n    function init() {\n      if ($field.length === 0) {\n        logger.error(\"Input field doesn't exist.\");\n        return;\n      }\n\n      if (!config.checkDataUrlProperties()) {\n        logger.error(\"One of options variables 'data' or 'url' must be defined.\");\n        return;\n      }\n\n      if (!config.checkRequiredProperties()) {\n        logger.error(\"Will not work without mentioned properties.\");\n        return;\n      }\n\n      prepareField();\n      bindEvents();\n    }\n\n    function prepareField() {\n      if ($field.parent().hasClass(consts.getValue(\"WRAPPER_CSS_CLASS\"))) {\n        removeContainer();\n        removeWrapper();\n      }\n\n      createWrapper();\n      createContainer();\n      $container = $(\"#\" + getContainerId());\n\n      if (config.get(\"placeholder\")) {\n        $field.attr(\"placeholder\", config.get(\"placeholder\"));\n      }\n\n      function createWrapper() {\n        var $wrapper = $(\"<div>\"),\n            classes = consts.getValue(\"WRAPPER_CSS_CLASS\");\n\n        if (config.get(\"theme\") && config.get(\"theme\") !== \"\") {\n          classes += \" eac-\" + config.get(\"theme\");\n        }\n\n        if (config.get(\"cssClasses\") && config.get(\"cssClasses\") !== \"\") {\n          classes += \" \" + config.get(\"cssClasses\");\n        }\n\n        if (template.getTemplateClass() !== \"\") {\n          classes += \" \" + template.getTemplateClass();\n        }\n\n        $wrapper.addClass(classes);\n        $field.wrap($wrapper);\n\n        if (config.get(\"adjustWidth\") === true) {\n          adjustWrapperWidth();\n        }\n      }\n\n      function adjustWrapperWidth() {\n        var fieldWidth = $field.outerWidth();\n        $field.parent().css(\"width\", fieldWidth);\n      }\n\n      function removeWrapper() {\n        $field.unwrap();\n      }\n\n      function createContainer() {\n        var $elements_container = $(\"<div>\").addClass(consts.getValue(\"CONTAINER_CLASS\"));\n        $elements_container.attr(\"id\", getContainerId()).prepend($(\"<ul>\"));\n\n        (function () {\n          $elements_container\n          /* List show animation */\n          .on(\"show.eac\", function () {\n            switch (config.get(\"list\").showAnimation.type) {\n              case \"slide\":\n                var animationTime = config.get(\"list\").showAnimation.time,\n                    callback = config.get(\"list\").showAnimation.callback;\n                $elements_container.find(\"ul\").slideDown(animationTime, callback);\n                break;\n\n              case \"fade\":\n                var animationTime = config.get(\"list\").showAnimation.time,\n                    callback = config.get(\"list\").showAnimation.callback;\n                $elements_container.find(\"ul\").fadeIn(animationTime), callback;\n                break;\n\n              default:\n                $elements_container.find(\"ul\").show();\n                break;\n            }\n\n            config.get(\"list\").onShowListEvent();\n          })\n          /* List hide animation */\n          .on(\"hide.eac\", function () {\n            switch (config.get(\"list\").hideAnimation.type) {\n              case \"slide\":\n                var animationTime = config.get(\"list\").hideAnimation.time,\n                    callback = config.get(\"list\").hideAnimation.callback;\n                $elements_container.find(\"ul\").slideUp(animationTime, callback);\n                break;\n\n              case \"fade\":\n                var animationTime = config.get(\"list\").hideAnimation.time,\n                    callback = config.get(\"list\").hideAnimation.callback;\n                $elements_container.find(\"ul\").fadeOut(animationTime, callback);\n                break;\n\n              default:\n                $elements_container.find(\"ul\").hide();\n                break;\n            }\n\n            config.get(\"list\").onHideListEvent();\n          }).on(\"selectElement.eac\", function () {\n            $elements_container.find(\"ul li\").removeClass(\"selected\");\n            $elements_container.find(\"ul li\").eq(selectedElement).addClass(\"selected\");\n            config.get(\"list\").onSelectItemEvent();\n          }).on(\"loadElements.eac\", function (event, listBuilders, phrase) {\n            var $item = \"\",\n                $listContainer = $elements_container.find(\"ul\");\n            $listContainer.empty().detach();\n            elementsList = [];\n            var counter = 0;\n\n            for (var builderIndex = 0, listBuildersLength = listBuilders.length; builderIndex < listBuildersLength; builderIndex += 1) {\n              var listData = listBuilders[builderIndex].data;\n\n              if (listData.length === 0) {\n                continue;\n              }\n\n              if (listBuilders[builderIndex].header !== undefined && listBuilders[builderIndex].header.length > 0) {\n                $listContainer.append(\"<div class='eac-category' >\" + listBuilders[builderIndex].header + \"</div>\");\n              }\n\n              for (var i = 0, listDataLength = listData.length; i < listDataLength && counter < listBuilders[builderIndex].maxListSize; i += 1) {\n                $item = $(\"<li><div class='eac-item'></div></li>\");\n\n                (function () {\n                  var j = i,\n                      itemCounter = counter,\n                      elementsValue = listBuilders[builderIndex].getValue(listData[j]);\n                  $item.find(\" > div\").on(\"click\", function () {\n                    $field.val(elementsValue).trigger(\"change\");\n                    selectedElement = itemCounter;\n                    selectElement(itemCounter);\n                    config.get(\"list\").onClickEvent();\n                    config.get(\"list\").onChooseEvent();\n                  }).mouseover(function () {\n                    selectedElement = itemCounter;\n                    selectElement(itemCounter);\n                    config.get(\"list\").onMouseOverEvent();\n                  }).mouseout(function () {\n                    config.get(\"list\").onMouseOutEvent();\n                  }).html(template.build(highlight(elementsValue, phrase), listData[j]));\n                })();\n\n                $listContainer.append($item);\n                elementsList.push(listData[i]);\n                counter += 1;\n              }\n            }\n\n            $elements_container.append($listContainer);\n            config.get(\"list\").onLoadEvent();\n          });\n        })();\n\n        $field.after($elements_container);\n      }\n\n      function removeContainer() {\n        $field.next(\".\" + consts.getValue(\"CONTAINER_CLASS\")).remove();\n      }\n\n      function highlight(string, phrase) {\n        if (config.get(\"highlightPhrase\") && phrase !== \"\") {\n          return highlightPhrase(string, phrase);\n        } else {\n          return string;\n        }\n      }\n\n      function escapeRegExp(str) {\n        return str.replace(/[\\-\\[\\]\\/\\{\\}\\(\\)\\*\\+\\?\\.\\\\\\^\\$\\|]/g, \"\\\\$&\");\n      }\n\n      function highlightPhrase(string, phrase) {\n        var escapedPhrase = escapeRegExp(phrase);\n        return (string + \"\").replace(new RegExp(\"(\" + escapedPhrase + \")\", \"gi\"), \"<b>$1</b>\");\n      }\n    }\n\n    function getContainerId() {\n      var elementId = $field.attr(\"id\");\n      elementId = consts.getValue(\"CONTAINER_ID\") + elementId;\n      return elementId;\n    }\n\n    function bindEvents() {\n      bindAllEvents();\n\n      function bindAllEvents() {\n        if (checkParam(\"autocompleteOff\", true)) {\n          removeAutocomplete();\n        }\n\n        bindFocusOut();\n        bindKeyup();\n        bindKeydown();\n        bindKeypress();\n        bindFocus();\n        bindBlur();\n      }\n\n      function bindFocusOut() {\n        $field.focusout(function () {\n          var fieldValue = $field.val(),\n              phrase;\n\n          if (!config.get(\"list\").match.caseSensitive) {\n            fieldValue = fieldValue.toLowerCase();\n          }\n\n          for (var i = 0, length = elementsList.length; i < length; i += 1) {\n            phrase = config.get(\"getValue\")(elementsList[i]);\n\n            if (!config.get(\"list\").match.caseSensitive) {\n              phrase = phrase.toLowerCase();\n            }\n\n            if (phrase === fieldValue) {\n              selectedElement = i;\n              selectElement(selectedElement);\n              return;\n            }\n          }\n        });\n      }\n\n      function bindKeyup() {\n        $field.off(\"keyup\").keyup(function (event) {\n          switch (event.keyCode) {\n            case 27:\n              hideContainer();\n              loseFieldFocus();\n              break;\n\n            case 38:\n              event.preventDefault();\n\n              if (elementsList.length > 0 && selectedElement > 0) {\n                selectedElement -= 1;\n                $field.val(config.get(\"getValue\")(elementsList[selectedElement]));\n                selectElement(selectedElement);\n              }\n\n              break;\n\n            case 40:\n              event.preventDefault();\n\n              if (elementsList.length > 0 && selectedElement < elementsList.length - 1) {\n                selectedElement += 1;\n                $field.val(config.get(\"getValue\")(elementsList[selectedElement]));\n                selectElement(selectedElement);\n              }\n\n              break;\n\n            default:\n              if (event.keyCode > 40 || event.keyCode === 8) {\n                var inputPhrase = $field.val();\n\n                if (!(config.get(\"list\").hideOnEmptyPhrase === true && event.keyCode === 8 && inputPhrase === \"\")) {\n                  if (config.get(\"requestDelay\") > 0) {\n                    if (requestDelayTimeoutId !== undefined) {\n                      clearTimeout(requestDelayTimeoutId);\n                    }\n\n                    requestDelayTimeoutId = setTimeout(function () {\n                      loadData(inputPhrase);\n                    }, config.get(\"requestDelay\"));\n                  } else {\n                    loadData(inputPhrase);\n                  }\n                } else {\n                  hideContainer();\n                }\n              }\n\n              break;\n          }\n\n          function loadData(inputPhrase) {\n            if (inputPhrase.length < config.get(\"minCharNumber\")) {\n              return;\n            }\n\n            if (config.get(\"data\") !== \"list-required\") {\n              var data = config.get(\"data\");\n              var listBuilders = listBuilderService.init(data);\n              listBuilders = listBuilderService.updateCategories(listBuilders, data);\n              listBuilders = listBuilderService.processData(listBuilders, inputPhrase);\n              loadElements(listBuilders, inputPhrase);\n\n              if ($field.parent().find(\"li\").length > 0) {\n                showContainer();\n              } else {\n                hideContainer();\n              }\n            }\n\n            var settings = createAjaxSettings();\n\n            if (settings.url === undefined || settings.url === \"\") {\n              settings.url = config.get(\"url\");\n            }\n\n            if (settings.dataType === undefined || settings.dataType === \"\") {\n              settings.dataType = config.get(\"dataType\");\n            }\n\n            if (settings.url !== undefined && settings.url !== \"list-required\") {\n              settings.url = settings.url(inputPhrase);\n              settings.data = config.get(\"preparePostData\")(settings.data, inputPhrase);\n              $.ajax(settings).done(function (data) {\n                var listBuilders = listBuilderService.init(data);\n                listBuilders = listBuilderService.updateCategories(listBuilders, data);\n                listBuilders = listBuilderService.convertXml(listBuilders);\n\n                if (checkInputPhraseMatchResponse(inputPhrase, data)) {\n                  listBuilders = listBuilderService.processData(listBuilders, inputPhrase);\n                  loadElements(listBuilders, inputPhrase);\n                }\n\n                if (listBuilderService.checkIfDataExists(listBuilders) && $field.parent().find(\"li\").length > 0) {\n                  showContainer();\n                } else {\n                  hideContainer();\n                }\n\n                config.get(\"ajaxCallback\")();\n              }).fail(function () {\n                logger.warning(\"Fail to load response data\");\n              }).always(function () {});\n            }\n\n            function createAjaxSettings() {\n              var settings = {},\n                  ajaxSettings = config.get(\"ajaxSettings\") || {};\n\n              for (var set in ajaxSettings) {\n                settings[set] = ajaxSettings[set];\n              }\n\n              return settings;\n            }\n\n            function checkInputPhraseMatchResponse(inputPhrase, data) {\n              if (config.get(\"matchResponseProperty\") !== false) {\n                if (typeof config.get(\"matchResponseProperty\") === \"string\") {\n                  return data[config.get(\"matchResponseProperty\")] === inputPhrase;\n                }\n\n                if (typeof config.get(\"matchResponseProperty\") === \"function\") {\n                  return config.get(\"matchResponseProperty\")(data) === inputPhrase;\n                }\n\n                return true;\n              } else {\n                return true;\n              }\n            }\n          }\n        });\n      }\n\n      function bindKeydown() {\n        $field.on(\"keydown\", function (evt) {\n          evt = evt || window.event;\n          var keyCode = evt.keyCode;\n\n          if (keyCode === 38) {\n            suppressKeypress = true;\n            return false;\n          }\n        }).keydown(function (event) {\n          if (event.keyCode === 13 && selectedElement > -1) {\n            $field.val(config.get(\"getValue\")(elementsList[selectedElement]));\n            config.get(\"list\").onKeyEnterEvent();\n            config.get(\"list\").onChooseEvent();\n            selectedElement = -1;\n            hideContainer();\n            event.preventDefault();\n          }\n        });\n      }\n\n      function bindKeypress() {\n        $field.off(\"keypress\");\n      }\n\n      function bindFocus() {\n        $field.focus(function () {\n          if ($field.val() !== \"\" && elementsList.length > 0) {\n            selectedElement = -1;\n            showContainer();\n          }\n        });\n      }\n\n      function bindBlur() {\n        $field.blur(function () {\n          setTimeout(function () {\n            selectedElement = -1;\n            hideContainer();\n          }, 250);\n        });\n      }\n\n      function removeAutocomplete() {\n        $field.attr(\"autocomplete\", \"off\");\n      }\n    }\n\n    function showContainer() {\n      $container.trigger(\"show.eac\");\n    }\n\n    function hideContainer() {\n      $container.trigger(\"hide.eac\");\n    }\n\n    function selectElement(index) {\n      $container.trigger(\"selectElement.eac\", index);\n    }\n\n    function loadElements(list, phrase) {\n      $container.trigger(\"loadElements.eac\", [list, phrase]);\n    }\n\n    function loseFieldFocus() {\n      $field.trigger(\"blur\");\n    }\n  };\n\n  scope.eacHandles = [];\n\n  scope.getHandle = function (id) {\n    return scope.eacHandles[id];\n  };\n\n  scope.inputHasId = function (input) {\n    if ($(input).attr(\"id\") !== undefined && $(input).attr(\"id\").length > 0) {\n      return true;\n    } else {\n      return false;\n    }\n  };\n\n  scope.assignRandomId = function (input) {\n    var fieldId = \"\";\n\n    do {\n      fieldId = \"eac-\" + Math.floor(Math.random() * 10000);\n    } while ($(\"#\" + fieldId).length !== 0);\n\n    elementId = scope.consts.getValue(\"CONTAINER_ID\") + fieldId;\n    $(input).attr(\"id\", fieldId);\n  };\n\n  scope.setHandle = function (handle, id) {\n    scope.eacHandles[id] = handle;\n  };\n\n  return scope;\n}(EasyAutocomplete || {});\n\n(function ($) {\n  $.fn.easyAutocomplete = function (options) {\n    return this.each(function () {\n      var $this = $(this),\n          eacHandle = new EasyAutocomplete.main($this, options);\n\n      if (!EasyAutocomplete.inputHasId($this)) {\n        EasyAutocomplete.assignRandomId($this);\n      }\n\n      eacHandle.init();\n      EasyAutocomplete.setHandle(eacHandle, $this.attr(\"id\"));\n    });\n  };\n\n  $.fn.getSelectedItemIndex = function () {\n    var inputId = $(this).attr(\"id\");\n\n    if (inputId !== undefined) {\n      return EasyAutocomplete.getHandle(inputId).getSelectedItemIndex();\n    }\n\n    return -1;\n  };\n\n  $.fn.getItems = function () {\n    var inputId = $(this).attr(\"id\");\n\n    if (inputId !== undefined) {\n      return EasyAutocomplete.getHandle(inputId).getItems();\n    }\n\n    return -1;\n  };\n\n  $.fn.getItemData = function (index) {\n    var inputId = $(this).attr(\"id\");\n\n    if (inputId !== undefined && index > -1) {\n      return EasyAutocomplete.getHandle(inputId).getItemData(index);\n    }\n\n    return -1;\n  };\n\n  $.fn.getSelectedItemData = function () {\n    var inputId = $(this).attr(\"id\");\n\n    if (inputId !== undefined) {\n      return EasyAutocomplete.getHandle(inputId).getSelectedItemData();\n    }\n\n    return -1;\n  };\n})(jQuery);","map":{"version":3,"sources":["/home/abdul/projects/Imbd/app/javascript/packs/jquery.easy-autocomplete.js"],"names":["EasyAutocomplete","scope","Configuration","options","defaults","data","url","dataType","listLocation","xmlElementName","getValue","element","autocompleteOff","placeholder","ajaxCallback","matchResponseProperty","list","sort","enabled","method","a","b","maxNumberOfElements","hideOnEmptyPhrase","match","caseSensitive","phrase","search","showAnimation","type","time","callback","hideAnimation","onClickEvent","onSelectItemEvent","onLoadEvent","onChooseEvent","onKeyEnterEvent","onMouseOverEvent","onMouseOutEvent","onShowListEvent","onHideListEvent","highlightPhrase","theme","cssClasses","minCharNumber","requestDelay","adjustWidth","ajaxSettings","preparePostData","inputPhrase","loggerEnabled","template","categoriesAssigned","categories","externalObjects","get","propertyName","equals","name","value","isAssigned","checkDataUrlProperties","checkRequiredProperties","logger","error","printPropertiesThatDoesntExist","consol","optionsToCheck","prepareDefaults","mergeOptions","console","addAjaxSettings","processAfterMerge","$","text","undefined","Array","i","length","category","property","push","mergeObjects","source","target","mergedObject","defaultUrl","defaultlistLocation","toUpperCase","find","defaultsGetValue","checkPropertiesIfExist","log","inArray","Logger","message","warning","Constans","constants","CONTAINER_CLASS","CONTAINER_ID","WRAPPER_CSS_CLASS","ListBuilderService","configuration","proccessResponseData","init","listBuilder","builder","maxListSize","updateCategories","convertToListBuilder","convertXml","convertXmlToList","processData","checkIfDataExists","listBuilders","convertXmlToListBuilder","convertDataToListBuilder","header","simpleList","each","proccess","proccessData","config","findMatch","reduceElementsInList","preparedList","toLowerCase","slice","Template","genericTemplates","basic","cssClass","description","fields","iconLeft","icon","iconRight","iconSrc","links","link","custom","convertTemplateToMethod","_fields","buildMethod","elementValue","prepareBuildMethod","templateClass","emptyStringFunction","_cssClass","getTemplateClass","build","main","Core","$input","module","shortcut","consts","listBuilderService","checkParam","$field","$container","elementsList","selectedElement","requestDelayTimeoutId","getConstants","getConfiguration","getContainer","getSelectedItemIndex","getItems","getItemData","index","getSelectedItemData","prepareField","bindEvents","parent","hasClass","removeContainer","removeWrapper","createWrapper","createContainer","getContainerId","attr","$wrapper","classes","addClass","wrap","adjustWrapperWidth","fieldWidth","outerWidth","css","unwrap","$elements_container","prepend","on","animationTime","slideDown","fadeIn","show","slideUp","fadeOut","hide","removeClass","eq","event","$item","$listContainer","empty","detach","counter","builderIndex","listBuildersLength","listData","append","listDataLength","j","itemCounter","elementsValue","val","trigger","selectElement","mouseover","mouseout","html","highlight","after","next","remove","string","escapeRegExp","str","replace","escapedPhrase","RegExp","elementId","bindAllEvents","removeAutocomplete","bindFocusOut","bindKeyup","bindKeydown","bindKeypress","bindFocus","bindBlur","focusout","fieldValue","off","keyup","keyCode","hideContainer","loseFieldFocus","preventDefault","clearTimeout","setTimeout","loadData","loadElements","showContainer","settings","createAjaxSettings","ajax","done","checkInputPhraseMatchResponse","fail","always","set","evt","window","suppressKeypress","keydown","focus","blur","eacHandles","getHandle","id","inputHasId","input","assignRandomId","fieldId","Math","floor","random","setHandle","handle","fn","easyAutocomplete","$this","eacHandle","inputId","jQuery"],"mappings":"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","sourcesContent":["/*\r\n * easy-autocomplete\r\n * jQuery plugin for autocompletion\r\n * \r\n * @author Łukasz Pawełczak (http://github.com/pawelczak)\r\n * @version 1.3.5\r\n * Copyright  License: \r\n */\r\n\r\n/*\r\n * EasyAutocomplete - Configuration \r\n */\r\n \r\nvar EasyAutocomplete = (function(scope){\r\n\r\n\tscope.Configuration = function Configuration(options) {\r\n\t\tvar defaults = {\r\n\t\t\tdata: \"list-required\",\r\n\t\t\turl: \"list-required\",\r\n\t\t\tdataType: \"json\",\r\n\r\n\t\t\tlistLocation: function(data) {\r\n\t\t\t\treturn data;\r\n\t\t\t},\r\n\r\n\t\t\txmlElementName: \"\",\r\n\r\n\t\t\tgetValue: function(element) {\r\n\t\t\t\treturn element;\r\n\t\t\t},\r\n\r\n\t\t\tautocompleteOff: true,\r\n\r\n\t\t\tplaceholder: false,\r\n\r\n\t\t\tajaxCallback: function() {},\r\n\r\n\t\t\tmatchResponseProperty: false,\r\n\r\n\t\t\tlist: {\r\n\t\t\t\tsort: {\r\n\t\t\t\t\tenabled: false,\r\n\t\t\t\t\tmethod: function(a, b) {\r\n\t\t\t\t\t\ta = defaults.getValue(a);\r\n\t\t\t\t\t\tb = defaults.getValue(b);\r\n\t\t\t\t\t\tif (a < b) {\r\n\t\t\t\t\t\t\treturn -1;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif (a > b) {\r\n\t\t\t\t\t\t\treturn 1;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\treturn 0;\r\n\t\t\t\t\t}\r\n\t\t\t\t},\r\n\r\n\t\t\t\tmaxNumberOfElements: 6,\r\n\r\n\t\t\t\thideOnEmptyPhrase: true,\r\n\r\n\t\t\t\tmatch: {\r\n\t\t\t\t\tenabled: false,\r\n\t\t\t\t\tcaseSensitive: false,\r\n\t\t\t\t\tmethod: function(element, phrase) {\r\n\r\n\t\t\t\t\t\tif (element.search(phrase) > -1) {\r\n\t\t\t\t\t\t\treturn true;\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\treturn false;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t},\r\n\r\n\t\t\t\tshowAnimation: {\r\n\t\t\t\t\ttype: \"normal\", //normal|slide|fade\r\n\t\t\t\t\ttime: 400,\r\n\t\t\t\t\tcallback: function() {}\r\n\t\t\t\t},\r\n\r\n\t\t\t\thideAnimation: {\r\n\t\t\t\t\ttype: \"normal\",\r\n\t\t\t\t\ttime: 400,\r\n\t\t\t\t\tcallback: function() {}\r\n\t\t\t\t},\r\n\r\n\t\t\t\t/* Events */\r\n\t\t\t\tonClickEvent: function() {},\r\n\t\t\t\tonSelectItemEvent: function() {},\r\n\t\t\t\tonLoadEvent: function() {},\r\n\t\t\t\tonChooseEvent: function() {},\r\n\t\t\t\tonKeyEnterEvent: function() {},\r\n\t\t\t\tonMouseOverEvent: function() {},\r\n\t\t\t\tonMouseOutEvent: function() {},\t\r\n\t\t\t\tonShowListEvent: function() {},\r\n\t\t\t\tonHideListEvent: function() {}\r\n\t\t\t},\r\n\r\n\t\t\thighlightPhrase: true,\r\n\r\n\t\t\ttheme: \"\",\r\n\r\n\t\t\tcssClasses: \"\",\r\n\r\n\t\t\tminCharNumber: 0,\r\n\r\n\t\t\trequestDelay: 0,\r\n\r\n\t\t\tadjustWidth: true,\r\n\r\n\t\t\tajaxSettings: {},\r\n\r\n\t\t\tpreparePostData: function(data, inputPhrase) {return data;},\r\n\r\n\t\t\tloggerEnabled: true,\r\n\r\n\t\t\ttemplate: \"\",\r\n\r\n\t\t\tcategoriesAssigned: false,\r\n\r\n\t\t\tcategories: [{\r\n\t\t\t\tmaxNumberOfElements: 4\r\n\t\t\t}]\r\n\r\n\t\t};\r\n\t\t\r\n\t\tvar externalObjects = [\"ajaxSettings\", \"template\"];\r\n\r\n\t\tthis.get = function(propertyName) {\r\n\t\t\treturn defaults[propertyName];\r\n\t\t};\r\n\r\n\t\tthis.equals = function(name, value) {\r\n\t\t\tif (isAssigned(name)) {\r\n\t\t\t\tif (defaults[name] === value) {\r\n\t\t\t\t\treturn true;\r\n\t\t\t\t}\r\n\t\t\t} \r\n\t\t\t\r\n\t\t\treturn false;\r\n\t\t};\r\n\r\n\t\tthis.checkDataUrlProperties = function() {\r\n\t\t\tif (defaults.url === \"list-required\" && defaults.data === \"list-required\") {\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\t\t\treturn true;\r\n\t\t};\r\n\t\tthis.checkRequiredProperties = function() {\r\n\t\t\tfor (var propertyName in defaults) {\r\n\t\t\t\tif (defaults[propertyName] === \"required\") {\r\n\t\t\t\t\tlogger.error(\"Option \" + propertyName + \" must be defined\");\r\n\t\t\t\t\treturn false;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\treturn true;\r\n\t\t};\r\n\r\n\t\tthis.printPropertiesThatDoesntExist = function(consol, optionsToCheck) {\r\n\t\t\tprintPropertiesThatDoesntExist(consol, optionsToCheck);\r\n\t\t};\r\n\r\n\r\n\t\tprepareDefaults();\r\n\r\n\t\tmergeOptions();\r\n\r\n\t\tif (defaults.loggerEnabled === true) {\r\n\t\t\tprintPropertiesThatDoesntExist(console, options);\t\r\n\t\t}\r\n\r\n\t\taddAjaxSettings();\r\n\r\n\t\tprocessAfterMerge();\r\n\t\tfunction prepareDefaults() {\r\n\r\n\t\t\tif (options.dataType === \"xml\") {\r\n\t\t\t\t\r\n\t\t\t\tif (!options.getValue) {\r\n\r\n\t\t\t\t\toptions.getValue = function(element) {\r\n\t\t\t\t\t\treturn $(element).text();\r\n\t\t\t\t\t};\r\n\t\t\t\t}\r\n\r\n\t\t\t\t\r\n\t\t\t\tif (!options.list) {\r\n\r\n\t\t\t\t\toptions.list = {};\r\n\t\t\t\t} \r\n\r\n\t\t\t\tif (!options.list.sort) {\r\n\t\t\t\t\toptions.list.sort = {};\r\n\t\t\t\t}\r\n\r\n\r\n\t\t\t\toptions.list.sort.method = function(a, b) {\r\n\t\t\t\t\ta = options.getValue(a);\r\n\t\t\t\t\tb = options.getValue(b);\r\n\t\t\t\t\tif (a < b) {\r\n\t\t\t\t\t\treturn -1;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (a > b) {\r\n\t\t\t\t\t\treturn 1;\r\n\t\t\t\t\t}\r\n\t\t\t\t\treturn 0;\r\n\t\t\t\t};\r\n\r\n\t\t\t\tif (!options.list.match) {\r\n\t\t\t\t\toptions.list.match = {};\r\n\t\t\t\t}\r\n\r\n\t\t\t\toptions.list.match.method = function(element, phrase) {\r\n\r\n\t\t\t\t\tif (element.search(phrase) > -1) {\r\n\t\t\t\t\t\treturn true;\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\treturn false;\r\n\t\t\t\t\t}\r\n\t\t\t\t};\r\n\r\n\t\t\t}\r\n\t\t\tif (options.categories !== undefined && options.categories instanceof Array) {\r\n\r\n\t\t\t\tvar categories = [];\r\n\r\n\t\t\t\tfor (var i = 0, length = options.categories.length; i < length; i += 1) { \r\n\r\n\t\t\t\t\tvar category = options.categories[i];\r\n\r\n\t\t\t\t\tfor (var property in defaults.categories[0]) {\r\n\r\n\t\t\t\t\t\tif (category[property] === undefined) {\r\n\t\t\t\t\t\t\tcategory[property] = defaults.categories[0][property];\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tcategories.push(category);\r\n\t\t\t\t}\r\n\r\n\t\t\t\toptions.categories = categories;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tfunction mergeOptions() {\r\n\r\n\t\t\tdefaults = mergeObjects(defaults, options);\r\n\r\n\t\t\tfunction mergeObjects(source, target) {\r\n\t\t\t\tvar mergedObject = source || {};\r\n\r\n\t\t\t\tfor (var propertyName in source) {\r\n\t\t\t\t\tif (target[propertyName] !== undefined && target[propertyName] !== null) {\r\n\r\n\t\t\t\t\t\tif (typeof target[propertyName] !== \"object\" || \r\n\t\t\t\t\t\t\t\ttarget[propertyName] instanceof Array) {\r\n\t\t\t\t\t\t\tmergedObject[propertyName] = target[propertyName];\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tmergeObjects(source[propertyName], target[propertyName]);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\r\n\t\t\t\t/* If data is an object */\r\n\t\t\t\tif (target.data !== undefined && target.data !== null && typeof target.data === \"object\") {\r\n\t\t\t\t\tmergedObject.data = target.data;\r\n\t\t\t\t}\r\n\r\n\t\t\t\treturn mergedObject;\r\n\t\t\t}\r\n\t\t}\t\r\n\r\n\r\n\t\tfunction processAfterMerge() {\r\n\t\t\t\r\n\t\t\tif (defaults.url !== \"list-required\" && typeof defaults.url !== \"function\") {\r\n\t\t\t\tvar defaultUrl = defaults.url;\r\n\t\t\t\tdefaults.url = function() {\r\n\t\t\t\t\treturn defaultUrl;\r\n\t\t\t\t};\r\n\t\t\t}\r\n\r\n\t\t\tif (defaults.ajaxSettings.url !== undefined && typeof defaults.ajaxSettings.url !== \"function\") {\r\n\t\t\t\tvar defaultUrl = defaults.ajaxSettings.url;\r\n\t\t\t\tdefaults.ajaxSettings.url = function() {\r\n\t\t\t\t\treturn defaultUrl;\r\n\t\t\t\t};\r\n\t\t\t}\r\n\r\n\t\t\tif (typeof defaults.listLocation === \"string\") {\r\n\t\t\t\tvar defaultlistLocation = defaults.listLocation;\r\n\r\n\t\t\t\tif (defaults.dataType.toUpperCase() === \"XML\") {\r\n\t\t\t\t\tdefaults.listLocation = function(data) {\r\n\t\t\t\t\t\treturn $(data).find(defaultlistLocation);\r\n\t\t\t\t\t};\r\n\t\t\t\t} else {\r\n\t\t\t\t\tdefaults.listLocation = function(data) {\r\n\t\t\t\t\t\treturn data[defaultlistLocation];\r\n\t\t\t\t\t};\t\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tif (typeof defaults.getValue === \"string\") {\r\n\t\t\t\tvar defaultsGetValue = defaults.getValue;\r\n\t\t\t\tdefaults.getValue = function(element) {\r\n\t\t\t\t\treturn element[defaultsGetValue];\r\n\t\t\t\t};\r\n\t\t\t}\r\n\r\n\t\t\tif (options.categories !== undefined) {\r\n\t\t\t\tdefaults.categoriesAssigned = true;\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tfunction addAjaxSettings() {\r\n\r\n\t\t\tif (options.ajaxSettings !== undefined && typeof options.ajaxSettings === \"object\") {\r\n\t\t\t\tdefaults.ajaxSettings = options.ajaxSettings;\r\n\t\t\t} else {\r\n\t\t\t\tdefaults.ajaxSettings = {};\t\r\n\t\t\t}\r\n\t\t\t\r\n\t\t}\r\n\r\n\t\tfunction isAssigned(name) {\r\n\t\t\tif (defaults[name] !== undefined && defaults[name] !== null) {\r\n\t\t\t\treturn true;\r\n\t\t\t} else {\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\t\t}\r\n\t\tfunction printPropertiesThatDoesntExist(consol, optionsToCheck) {\r\n\t\t\t\r\n\t\t\tcheckPropertiesIfExist(defaults, optionsToCheck);\r\n\r\n\t\t\tfunction checkPropertiesIfExist(source, target) {\r\n\t\t\t\tfor(var property in target) {\r\n\t\t\t\t\tif (source[property] === undefined) {\r\n\t\t\t\t\t\tconsol.log(\"Property '\" + property + \"' does not exist in EasyAutocomplete options API.\");\t\t\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tif (typeof source[property] === \"object\" && $.inArray(property, externalObjects) === -1) {\r\n\t\t\t\t\t\tcheckPropertiesIfExist(source[property], target[property]);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\t\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n\r\n\treturn scope;\r\n\r\n})(EasyAutocomplete || {});\r\n\r\n\r\n/*\r\n * EasyAutocomplete - Logger \r\n */\r\nvar EasyAutocomplete = (function(scope){\r\n\t\r\n\tscope.Logger = function Logger() {\r\n\r\n\t\tthis.error = function(message) {\r\n\t\t\tconsole.log(\"ERROR: \" + message);\r\n\t\t};\r\n\r\n\t\tthis.warning = function(message) {\r\n\t\t\tconsole.log(\"WARNING: \" + message);\r\n\t\t};\r\n\t};\r\n\r\n\treturn scope;\r\n\r\n})(EasyAutocomplete || {});\r\n\t\r\n\r\n/*\r\n * EasyAutocomplete - Constans\r\n */\r\nvar EasyAutocomplete = (function(scope){\t\r\n\t\r\n\tscope.Constans = function Constans() {\r\n\t\tvar constants = {\r\n\t\t\tCONTAINER_CLASS: \"easy-autocomplete-container\",\r\n\t\t\tCONTAINER_ID: \"eac-container-\",\r\n\r\n\t\t\tWRAPPER_CSS_CLASS: \"easy-autocomplete\"\r\n\t\t};\r\n\r\n\t\tthis.getValue = function(propertyName) {\r\n\t\t\treturn constants[propertyName];\r\n\t\t};\r\n\r\n\t};\r\n\r\n\treturn scope;\r\n\r\n})(EasyAutocomplete || {});\r\n\r\n/*\r\n * EasyAutocomplete - ListBuilderService \r\n *\r\n * @author Łukasz Pawełczak \r\n *\r\n */\r\nvar EasyAutocomplete = (function(scope) {\r\n\r\n\tscope.ListBuilderService = function ListBuilderService(configuration, proccessResponseData) {\r\n\r\n\r\n\t\tthis.init = function(data) {\r\n\t\t\tvar listBuilder = [],\r\n\t\t\t\tbuilder = {};\r\n\r\n\t\t\tbuilder.data = configuration.get(\"listLocation\")(data);\r\n\t\t\tbuilder.getValue = configuration.get(\"getValue\");\r\n\t\t\tbuilder.maxListSize = configuration.get(\"list\").maxNumberOfElements;\r\n\r\n\t\t\t\t\r\n\t\t\tlistBuilder.push(builder);\r\n\r\n\t\t\treturn listBuilder;\r\n\t\t};\r\n\r\n\t\tthis.updateCategories = function(listBuilder, data) {\r\n\t\t\t\r\n\t\t\tif (configuration.get(\"categoriesAssigned\")) {\r\n\r\n\t\t\t\tlistBuilder = [];\r\n\r\n\t\t\t\tfor(var i = 0; i < configuration.get(\"categories\").length; i += 1) {\r\n\r\n\t\t\t\t\tvar builder = convertToListBuilder(configuration.get(\"categories\")[i], data);\r\n\r\n\t\t\t\t\tlistBuilder.push(builder);\r\n\t\t\t\t}\r\n\r\n\t\t\t} \r\n\r\n\t\t\treturn listBuilder;\r\n\t\t};\r\n\r\n\t\tthis.convertXml = function(listBuilder) {\r\n\t\t\tif(configuration.get(\"dataType\").toUpperCase() === \"XML\") {\r\n\r\n\t\t\t\tfor(var i = 0; i < listBuilder.length; i += 1) {\r\n\t\t\t\t\tlistBuilder[i].data = convertXmlToList(listBuilder[i]);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\treturn listBuilder;\r\n\t\t};\r\n\r\n\t\tthis.processData = function(listBuilder, inputPhrase) {\r\n\r\n\t\t\tfor(var i = 0, length = listBuilder.length; i < length; i+=1) {\r\n\t\t\t\tlistBuilder[i].data = proccessResponseData(configuration, listBuilder[i], inputPhrase);\r\n\t\t\t}\r\n\r\n\t\t\treturn listBuilder;\r\n\t\t};\r\n\r\n\t\tthis.checkIfDataExists = function(listBuilders) {\r\n\r\n\t\t\tfor(var i = 0, length = listBuilders.length; i < length; i += 1) {\r\n\r\n\t\t\t\tif (listBuilders[i].data !== undefined && listBuilders[i].data instanceof Array) {\r\n\t\t\t\t\tif (listBuilders[i].data.length > 0) {\r\n\t\t\t\t\t\treturn true;\r\n\t\t\t\t\t}\r\n\t\t\t\t} \r\n\t\t\t}\r\n\r\n\t\t\treturn false;\r\n\t\t};\r\n\r\n\r\n\t\tfunction convertToListBuilder(category, data) {\r\n\r\n\t\t\tvar builder = {};\r\n\r\n\t\t\tif(configuration.get(\"dataType\").toUpperCase() === \"XML\") {\r\n\r\n\t\t\t\tbuilder = convertXmlToListBuilder();\r\n\t\t\t} else {\r\n\r\n\t\t\t\tbuilder = convertDataToListBuilder();\r\n\t\t\t}\r\n\t\t\t\r\n\r\n\t\t\tif (category.header !== undefined) {\r\n\t\t\t\tbuilder.header = category.header;\r\n\t\t\t}\r\n\r\n\t\t\tif (category.maxNumberOfElements !== undefined) {\r\n\t\t\t\tbuilder.maxNumberOfElements = category.maxNumberOfElements;\r\n\t\t\t}\r\n\r\n\t\t\tif (configuration.get(\"list\").maxNumberOfElements !== undefined) {\r\n\r\n\t\t\t\tbuilder.maxListSize = configuration.get(\"list\").maxNumberOfElements;\r\n\t\t\t}\r\n\r\n\t\t\tif (category.getValue !== undefined) {\r\n\r\n\t\t\t\tif (typeof category.getValue === \"string\") {\r\n\t\t\t\t\tvar defaultsGetValue = category.getValue;\r\n\t\t\t\t\tbuilder.getValue = function(element) {\r\n\t\t\t\t\t\treturn element[defaultsGetValue];\r\n\t\t\t\t\t};\r\n\t\t\t\t} else if (typeof category.getValue === \"function\") {\r\n\t\t\t\t\tbuilder.getValue = category.getValue;\r\n\t\t\t\t}\r\n\r\n\t\t\t} else {\r\n\t\t\t\tbuilder.getValue = configuration.get(\"getValue\");\t\r\n\t\t\t}\r\n\t\t\t\r\n\r\n\t\t\treturn builder;\r\n\r\n\r\n\t\t\tfunction convertXmlToListBuilder() {\r\n\r\n\t\t\t\tvar builder = {},\r\n\t\t\t\t\tlistLocation;\r\n\r\n\t\t\t\tif (category.xmlElementName !== undefined) {\r\n\t\t\t\t\tbuilder.xmlElementName = category.xmlElementName;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (category.listLocation !== undefined) {\r\n\r\n\t\t\t\t\tlistLocation = category.listLocation;\r\n\t\t\t\t} else if (configuration.get(\"listLocation\") !== undefined) {\r\n\r\n\t\t\t\t\tlistLocation = configuration.get(\"listLocation\");\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (listLocation !== undefined) {\r\n\t\t\t\t\tif (typeof listLocation === \"string\") {\r\n\t\t\t\t\t\tbuilder.data = $(data).find(listLocation);\r\n\t\t\t\t\t} else if (typeof listLocation === \"function\") {\r\n\r\n\t\t\t\t\t\tbuilder.data = listLocation(data);\r\n\t\t\t\t\t}\r\n\t\t\t\t} else {\r\n\r\n\t\t\t\t\tbuilder.data = data;\r\n\t\t\t\t}\r\n\r\n\t\t\t\treturn builder;\r\n\t\t\t}\r\n\r\n\r\n\t\t\tfunction convertDataToListBuilder() {\r\n\r\n\t\t\t\tvar builder = {};\r\n\r\n\t\t\t\tif (category.listLocation !== undefined) {\r\n\r\n\t\t\t\t\tif (typeof category.listLocation === \"string\") {\r\n\t\t\t\t\t\tbuilder.data = data[category.listLocation];\r\n\t\t\t\t\t} else if (typeof category.listLocation === \"function\") {\r\n\t\t\t\t\t\tbuilder.data = category.listLocation(data);\r\n\t\t\t\t\t}\r\n\t\t\t\t} else {\r\n\t\t\t\t\tbuilder.data = data;\r\n\t\t\t\t}\r\n\r\n\t\t\t\treturn builder;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tfunction convertXmlToList(builder) {\r\n\t\t\tvar simpleList = [];\r\n\r\n\t\t\tif (builder.xmlElementName === undefined) {\r\n\t\t\t\tbuilder.xmlElementName = configuration.get(\"xmlElementName\");\r\n\t\t\t}\r\n\r\n\r\n\t\t\t$(builder.data).find(builder.xmlElementName).each(function() {\r\n\t\t\t\tsimpleList.push(this);\r\n\t\t\t});\r\n\r\n\t\t\treturn simpleList;\r\n\t\t}\r\n\r\n\t};\r\n\r\n\treturn scope;\r\n\r\n})(EasyAutocomplete || {});\r\n\r\n\r\n/*\r\n * EasyAutocomplete - Data proccess module\r\n *\r\n * Process list to display:\r\n * - sort \r\n * - decrease number to specific number\r\n * - show only matching list\r\n *\r\n */\r\nvar EasyAutocomplete = (function(scope) {\r\n\r\n\tscope.proccess = function proccessData(config, listBuilder, phrase) {\r\n\r\n\t\tscope.proccess.match = match;\r\n\r\n\t\tvar list = listBuilder.data,\r\n\t\t\tinputPhrase = phrase;//TODO REFACTOR\r\n\r\n\t\tlist = findMatch(list, inputPhrase);\r\n\t\tlist = reduceElementsInList(list);\r\n\t\tlist = sort(list);\r\n\r\n\t\treturn list;\r\n\r\n\r\n\t\tfunction findMatch(list, phrase) {\r\n\t\t\tvar preparedList = [],\r\n\t\t\t\tvalue = \"\";\r\n\r\n\t\t\tif (config.get(\"list\").match.enabled) {\r\n\r\n\t\t\t\tfor(var i = 0, length = list.length; i < length; i += 1) {\r\n\r\n\t\t\t\t\tvalue = config.get(\"getValue\")(list[i]);\r\n\t\t\t\t\t\r\n\t\t\t\t\tif (match(value, phrase)) {\r\n\t\t\t\t\t\tpreparedList.push(list[i]);\t\r\n\t\t\t\t\t}\r\n\t\t\t\t\t\r\n\t\t\t\t}\r\n\r\n\t\t\t} else {\r\n\t\t\t\tpreparedList = list;\r\n\t\t\t}\r\n\r\n\t\t\treturn preparedList;\r\n\t\t}\r\n\r\n\t\tfunction match(value, phrase) {\r\n\r\n\t\t\tif (!config.get(\"list\").match.caseSensitive) {\r\n\r\n\t\t\t\tif (typeof value === \"string\") {\r\n\t\t\t\t\tvalue = value.toLowerCase();\t\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\tphrase = phrase.toLowerCase();\r\n\t\t\t}\r\n\t\t\tif (config.get(\"list\").match.method(value, phrase)) {\r\n\t\t\t\treturn true;\r\n\t\t\t} else {\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tfunction reduceElementsInList(list) {\r\n\t\t\tif (listBuilder.maxNumberOfElements !== undefined && list.length > listBuilder.maxNumberOfElements) {\r\n\t\t\t\tlist = list.slice(0, listBuilder.maxNumberOfElements);\r\n\t\t\t}\r\n\r\n\t\t\treturn list;\r\n\t\t}\r\n\r\n\t\tfunction sort(list) {\r\n\t\t\tif (config.get(\"list\").sort.enabled) {\r\n\t\t\t\tlist.sort(config.get(\"list\").sort.method);\r\n\t\t\t}\r\n\r\n\t\t\treturn list;\r\n\t\t}\r\n\t\t\r\n\t};\r\n\r\n\r\n\treturn scope;\r\n\r\n\r\n})(EasyAutocomplete || {});\r\n\r\n\r\n/*\r\n * EasyAutocomplete - Template \r\n *\r\n * \r\n *\r\n */\r\nvar EasyAutocomplete = (function(scope){\r\n\r\n\tscope.Template = function Template(options) {\r\n\r\n\r\n\t\tvar genericTemplates = {\r\n\t\t\tbasic: {\r\n\t\t\t\ttype: \"basic\",\r\n\t\t\t\tmethod: function(element) { return element; },\r\n\t\t\t\tcssClass: \"\"\r\n\t\t\t},\r\n\t\t\tdescription: {\r\n\t\t\t\ttype: \"description\",\r\n\t\t\t\tfields: {\r\n\t\t\t\t\tdescription: \"description\"\r\n\t\t\t\t},\r\n\t\t\t\tmethod: function(element) {\treturn element + \" - description\"; },\r\n\t\t\t\tcssClass: \"eac-description\"\r\n\t\t\t},\r\n\t\t\ticonLeft: {\r\n\t\t\t\ttype: \"iconLeft\",\r\n\t\t\t\tfields: {\r\n\t\t\t\t\ticon: \"\"\r\n\t\t\t\t},\r\n\t\t\t\tmethod: function(element) {\r\n\t\t\t\t\treturn element;\r\n\t\t\t\t},\r\n\t\t\t\tcssClass: \"eac-icon-left\"\r\n\t\t\t},\r\n\t\t\ticonRight: {\r\n\t\t\t\ttype: \"iconRight\",\r\n\t\t\t\tfields: {\r\n\t\t\t\t\ticonSrc: \"\"\r\n\t\t\t\t},\r\n\t\t\t\tmethod: function(element) {\r\n\t\t\t\t\treturn element;\r\n\t\t\t\t},\r\n\t\t\t\tcssClass: \"eac-icon-right\"\r\n\t\t\t},\r\n\t\t\tlinks: {\r\n\t\t\t\ttype: \"links\",\r\n\t\t\t\tfields: {\r\n\t\t\t\t\tlink: \"\"\r\n\t\t\t\t},\r\n\t\t\t\tmethod: function(element) {\r\n\t\t\t\t\treturn element;\r\n\t\t\t\t},\r\n\t\t\t\tcssClass: \"\"\r\n\t\t\t},\r\n\t\t\tcustom: {\r\n\t\t\t\ttype: \"custom\",\r\n\t\t\t\tmethod: function() {},\r\n\t\t\t\tcssClass: \"\"\r\n\t\t\t}\r\n\t\t},\r\n\r\n\r\n\r\n\t\t/*\r\n\t\t * Converts method with {{text}} to function\r\n\t\t */\r\n\t\tconvertTemplateToMethod = function(template) {\r\n\r\n\r\n\t\t\tvar _fields = template.fields,\r\n\t\t\t\tbuildMethod;\r\n\r\n\t\t\tif (template.type === \"description\") {\r\n\r\n\t\t\t\tbuildMethod = genericTemplates.description.method; \r\n\r\n\t\t\t\tif (typeof _fields.description === \"string\") {\r\n\t\t\t\t\tbuildMethod = function(elementValue, element) {\r\n\t\t\t\t\t\treturn elementValue + \" - <span>\" + element[_fields.description] + \"</span>\";\r\n\t\t\t\t\t};\t\t\t\t\t\r\n\t\t\t\t} else if (typeof _fields.description === \"function\") {\r\n\t\t\t\t\tbuildMethod = function(elementValue, element) {\r\n\t\t\t\t\t\treturn elementValue + \" - <span>\" + _fields.description(element) + \"</span>\";\r\n\t\t\t\t\t};\t\r\n\t\t\t\t}\r\n\r\n\t\t\t\treturn buildMethod;\r\n\t\t\t}\r\n\r\n\t\t\tif (template.type === \"iconRight\") {\r\n\r\n\t\t\t\tif (typeof _fields.iconSrc === \"string\") {\r\n\t\t\t\t\tbuildMethod = function(elementValue, element) {\r\n\t\t\t\t\t\treturn elementValue + \"<img class='eac-icon' src='\" + element[_fields.iconSrc] + \"' />\" ;\r\n\t\t\t\t\t};\t\t\t\t\t\r\n\t\t\t\t} else if (typeof _fields.iconSrc === \"function\") {\r\n\t\t\t\t\tbuildMethod = function(elementValue, element) {\r\n\t\t\t\t\t\treturn elementValue + \"<img class='eac-icon' src='\" + _fields.iconSrc(element) + \"' />\" ;\r\n\t\t\t\t\t};\r\n\t\t\t\t}\r\n\r\n\t\t\t\treturn buildMethod;\r\n\t\t\t}\r\n\r\n\r\n\t\t\tif (template.type === \"iconLeft\") {\r\n\r\n\t\t\t\tif (typeof _fields.iconSrc === \"string\") {\r\n\t\t\t\t\tbuildMethod = function(elementValue, element) {\r\n\t\t\t\t\t\treturn \"<img class='eac-icon' src='\" + element[_fields.iconSrc] + \"' />\" + elementValue;\r\n\t\t\t\t\t};\t\t\t\t\t\r\n\t\t\t\t} else if (typeof _fields.iconSrc === \"function\") {\r\n\t\t\t\t\tbuildMethod = function(elementValue, element) {\r\n\t\t\t\t\t\treturn \"<img class='eac-icon' src='\" + _fields.iconSrc(element) + \"' />\" + elementValue;\r\n\t\t\t\t\t};\r\n\t\t\t\t}\r\n\r\n\t\t\t\treturn buildMethod;\r\n\t\t\t}\r\n\r\n\t\t\tif(template.type === \"links\") {\r\n\r\n\t\t\t\tif (typeof _fields.link === \"string\") {\r\n\t\t\t\t\tbuildMethod = function(elementValue, element) {\r\n\t\t\t\t\t\treturn \"<a href='\" + element[_fields.link] + \"' >\" + elementValue + \"</a>\";\r\n\t\t\t\t\t};\t\t\t\t\t\r\n\t\t\t\t} else if (typeof _fields.link === \"function\") {\r\n\t\t\t\t\tbuildMethod = function(elementValue, element) {\r\n\t\t\t\t\t\treturn \"<a href='\" + _fields.link(element) + \"' >\" + elementValue + \"</a>\";\r\n\t\t\t\t\t};\r\n\t\t\t\t}\r\n\r\n\t\t\t\treturn buildMethod;\r\n\t\t\t}\r\n\r\n\r\n\t\t\tif (template.type === \"custom\") {\r\n\r\n\t\t\t\treturn template.method;\r\n\t\t\t}\r\n\r\n\t\t\treturn genericTemplates.basic.method;\r\n\r\n\t\t},\r\n\r\n\r\n\t\tprepareBuildMethod = function(options) {\r\n\t\t\tif (!options || !options.type) {\r\n\r\n\t\t\t\treturn genericTemplates.basic.method;\r\n\t\t\t}\r\n\r\n\t\t\tif (options.type && genericTemplates[options.type]) {\r\n\r\n\t\t\t\treturn convertTemplateToMethod(options);\r\n\t\t\t} else {\r\n\r\n\t\t\t\treturn genericTemplates.basic.method;\r\n\t\t\t}\r\n\r\n\t\t},\r\n\r\n\t\ttemplateClass = function(options) {\r\n\t\t\tvar emptyStringFunction = function() {return \"\";};\r\n\r\n\t\t\tif (!options || !options.type) {\r\n\r\n\t\t\t\treturn emptyStringFunction;\r\n\t\t\t}\r\n\r\n\t\t\tif (options.type && genericTemplates[options.type]) {\r\n\t\t\t\treturn (function () { \r\n\t\t\t\t\tvar _cssClass = genericTemplates[options.type].cssClass;\r\n\t\t\t\t\treturn function() { return _cssClass;};\r\n\t\t\t\t})();\r\n\t\t\t} else {\r\n\t\t\t\treturn emptyStringFunction;\r\n\t\t\t}\r\n\t\t};\r\n\r\n\r\n\t\tthis.getTemplateClass = templateClass(options);\r\n\r\n\t\tthis.build = prepareBuildMethod(options);\r\n\r\n\r\n\t};\r\n\r\n\treturn scope;\r\n\r\n})(EasyAutocomplete || {});\r\n\r\n\r\n/*\r\n * EasyAutocomplete - jQuery plugin for autocompletion\r\n *\r\n */\r\nvar EasyAutocomplete = (function(scope) {\r\n\r\n\t\r\n\tscope.main = function Core($input, options) {\r\n\t\t\t\t\r\n\t\tvar module = {\r\n\t\t\t\tname: \"EasyAutocomplete\",\r\n\t\t\t\tshortcut: \"eac\"\r\n\t\t\t};\r\n\r\n\t\tvar consts = new scope.Constans(),\r\n\t\t\tconfig = new scope.Configuration(options),\r\n\t\t\tlogger = new scope.Logger(),\r\n\t\t\ttemplate = new scope.Template(options.template),\r\n\t\t\tlistBuilderService = new scope.ListBuilderService(config, scope.proccess),\r\n\t\t\tcheckParam = config.equals,\r\n\r\n\t\t\t$field = $input, \r\n\t\t\t$container = \"\",\r\n\t\t\telementsList = [],\r\n\t\t\tselectedElement = -1,\r\n\t\t\trequestDelayTimeoutId;\r\n\r\n\t\tscope.consts = consts;\r\n\r\n\t\tthis.getConstants = function() {\r\n\t\t\treturn consts;\r\n\t\t};\r\n\r\n\t\tthis.getConfiguration = function() {\r\n\t\t\treturn config;\r\n\t\t};\r\n\r\n\t\tthis.getContainer = function() {\r\n\t\t\treturn $container;\r\n\t\t};\r\n\r\n\t\tthis.getSelectedItemIndex = function() {\r\n\t\t\treturn selectedElement;\r\n\t\t};\r\n\r\n\t\tthis.getItems = function () {\r\n\t\t\treturn elementsList;\r\n\t\t};\r\n\r\n\t\tthis.getItemData = function(index) {\r\n\r\n\t\t\tif (elementsList.length < index || elementsList[index] === undefined) {\r\n\t\t\t\treturn -1;\r\n\t\t\t} else {\r\n\t\t\t\treturn elementsList[index];\r\n\t\t\t}\r\n\t\t};\r\n\r\n\t\tthis.getSelectedItemData = function() {\r\n\t\t\treturn this.getItemData(selectedElement);\r\n\t\t};\r\n\r\n\t\tthis.build = function() {\r\n\t\t\tprepareField();\r\n\t\t};\r\n\r\n\t\tthis.init = function() {\r\n\t\t\tinit();\r\n\t\t};\r\n\t\tfunction init() {\r\n\r\n\t\t\tif ($field.length === 0) {\r\n\t\t\t\tlogger.error(\"Input field doesn't exist.\");\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\t\tif (!config.checkDataUrlProperties()) {\r\n\t\t\t\tlogger.error(\"One of options variables 'data' or 'url' must be defined.\");\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\t\tif (!config.checkRequiredProperties()) {\r\n\t\t\t\tlogger.error(\"Will not work without mentioned properties.\");\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\r\n\t\t\tprepareField();\r\n\t\t\tbindEvents();\t\r\n\r\n\t\t}\r\n\t\tfunction prepareField() {\r\n\r\n\t\t\t\t\r\n\t\t\tif ($field.parent().hasClass(consts.getValue(\"WRAPPER_CSS_CLASS\"))) {\r\n\t\t\t\tremoveContainer();\r\n\t\t\t\tremoveWrapper();\r\n\t\t\t} \r\n\t\t\t\r\n\t\t\tcreateWrapper();\r\n\t\t\tcreateContainer();\t\r\n\r\n\t\t\t$container = $(\"#\" + getContainerId());\r\n\t\t\tif (config.get(\"placeholder\")) {\r\n\t\t\t\t$field.attr(\"placeholder\", config.get(\"placeholder\"));\r\n\t\t\t}\r\n\r\n\r\n\t\t\tfunction createWrapper() {\r\n\t\t\t\tvar $wrapper = $(\"<div>\"),\r\n\t\t\t\t\tclasses = consts.getValue(\"WRAPPER_CSS_CLASS\");\r\n\r\n\t\t\t\r\n\t\t\t\tif (config.get(\"theme\") && config.get(\"theme\") !== \"\") {\r\n\t\t\t\t\tclasses += \" eac-\" + config.get(\"theme\");\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (config.get(\"cssClasses\") && config.get(\"cssClasses\") !== \"\") {\r\n\t\t\t\t\tclasses += \" \" + config.get(\"cssClasses\");\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (template.getTemplateClass() !== \"\") {\r\n\t\t\t\t\tclasses += \" \" + template.getTemplateClass();\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\r\n\t\t\t\t$wrapper\r\n\t\t\t\t\t.addClass(classes);\r\n\t\t\t\t$field.wrap($wrapper);\r\n\r\n\r\n\t\t\t\tif (config.get(\"adjustWidth\") === true) {\r\n\t\t\t\t\tadjustWrapperWidth();\t\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\r\n\t\t\t}\r\n\r\n\t\t\tfunction adjustWrapperWidth() {\r\n\t\t\t\tvar fieldWidth = $field.outerWidth();\r\n\r\n\t\t\t\t$field.parent().css(\"width\", fieldWidth);\t\t\t\t\r\n\t\t\t}\r\n\r\n\t\t\tfunction removeWrapper() {\r\n\t\t\t\t$field.unwrap();\r\n\t\t\t}\r\n\r\n\t\t\tfunction createContainer() {\r\n\t\t\t\tvar $elements_container = $(\"<div>\").addClass(consts.getValue(\"CONTAINER_CLASS\"));\r\n\r\n\t\t\t\t$elements_container\r\n\t\t\t\t\t\t.attr(\"id\", getContainerId())\r\n\t\t\t\t\t\t.prepend($(\"<ul>\"));\r\n\r\n\r\n\t\t\t\t(function() {\r\n\r\n\t\t\t\t\t$elements_container\r\n\t\t\t\t\t\t/* List show animation */\r\n\t\t\t\t\t\t.on(\"show.eac\", function() {\r\n\r\n\t\t\t\t\t\t\tswitch(config.get(\"list\").showAnimation.type) {\r\n\r\n\t\t\t\t\t\t\t\tcase \"slide\":\r\n\t\t\t\t\t\t\t\t\tvar animationTime = config.get(\"list\").showAnimation.time,\r\n\t\t\t\t\t\t\t\t\t\tcallback = config.get(\"list\").showAnimation.callback;\r\n\r\n\t\t\t\t\t\t\t\t\t$elements_container.find(\"ul\").slideDown(animationTime, callback);\r\n\t\t\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\t\t\t\tcase \"fade\":\r\n\t\t\t\t\t\t\t\t\tvar animationTime = config.get(\"list\").showAnimation.time,\r\n\t\t\t\t\t\t\t\t\t\tcallback = config.get(\"list\").showAnimation.callback;\r\n\r\n\t\t\t\t\t\t\t\t\t$elements_container.find(\"ul\").fadeIn(animationTime), callback;\r\n\t\t\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\t\t\t\tdefault:\r\n\t\t\t\t\t\t\t\t\t$elements_container.find(\"ul\").show();\r\n\t\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\tconfig.get(\"list\").onShowListEvent();\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t\t/* List hide animation */\r\n\t\t\t\t\t\t.on(\"hide.eac\", function() {\r\n\r\n\t\t\t\t\t\t\tswitch(config.get(\"list\").hideAnimation.type) {\r\n\r\n\t\t\t\t\t\t\t\tcase \"slide\":\r\n\t\t\t\t\t\t\t\t\tvar animationTime = config.get(\"list\").hideAnimation.time,\r\n\t\t\t\t\t\t\t\t\t\tcallback = config.get(\"list\").hideAnimation.callback;\r\n\r\n\t\t\t\t\t\t\t\t\t$elements_container.find(\"ul\").slideUp(animationTime, callback);\r\n\t\t\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\t\t\t\tcase \"fade\":\r\n\t\t\t\t\t\t\t\t\tvar animationTime = config.get(\"list\").hideAnimation.time,\r\n\t\t\t\t\t\t\t\t\t\tcallback = config.get(\"list\").hideAnimation.callback;\r\n\r\n\t\t\t\t\t\t\t\t\t$elements_container.find(\"ul\").fadeOut(animationTime, callback);\r\n\t\t\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\t\t\t\tdefault:\r\n\t\t\t\t\t\t\t\t\t$elements_container.find(\"ul\").hide();\r\n\t\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\tconfig.get(\"list\").onHideListEvent();\r\n\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t\t.on(\"selectElement.eac\", function() {\r\n\t\t\t\t\t\t\t$elements_container.find(\"ul li\").removeClass(\"selected\");\r\n\t\t\t\t\t\t\t$elements_container.find(\"ul li\").eq(selectedElement).addClass(\"selected\");\r\n\r\n\t\t\t\t\t\t\tconfig.get(\"list\").onSelectItemEvent();\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t\t.on(\"loadElements.eac\", function(event, listBuilders, phrase) {\r\n\t\t\t\r\n\r\n\t\t\t\t\t\t\tvar $item = \"\",\r\n\t\t\t\t\t\t\t\t$listContainer = $elements_container.find(\"ul\");\r\n\r\n\t\t\t\t\t\t\t$listContainer\r\n\t\t\t\t\t\t\t\t.empty()\r\n\t\t\t\t\t\t\t\t.detach();\r\n\r\n\t\t\t\t\t\t\telementsList = [];\r\n\t\t\t\t\t\t\tvar counter = 0;\r\n\t\t\t\t\t\t\tfor(var builderIndex = 0, listBuildersLength = listBuilders.length; builderIndex < listBuildersLength; builderIndex += 1) {\r\n\r\n\t\t\t\t\t\t\t\tvar listData = listBuilders[builderIndex].data;\r\n\r\n\t\t\t\t\t\t\t\tif (listData.length === 0) {\r\n\t\t\t\t\t\t\t\t\tcontinue;\r\n\t\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\t\tif (listBuilders[builderIndex].header !== undefined && listBuilders[builderIndex].header.length > 0) {\r\n\t\t\t\t\t\t\t\t\t$listContainer.append(\"<div class='eac-category' >\" + listBuilders[builderIndex].header + \"</div>\");\r\n\t\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\t\tfor(var i = 0, listDataLength = listData.length; i < listDataLength && counter < listBuilders[builderIndex].maxListSize; i += 1) {\r\n\t\t\t\t\t\t\t\t\t$item = $(\"<li><div class='eac-item'></div></li>\");\r\n\t\t\t\t\t\t\t\t\t\r\n\r\n\t\t\t\t\t\t\t\t\t(function() {\r\n\t\t\t\t\t\t\t\t\t\tvar j = i,\r\n\t\t\t\t\t\t\t\t\t\t\titemCounter = counter,\r\n\t\t\t\t\t\t\t\t\t\t\telementsValue = listBuilders[builderIndex].getValue(listData[j]);\r\n\r\n\t\t\t\t\t\t\t\t\t\t$item.find(\" > div\")\r\n\t\t\t\t\t\t\t\t\t\t\t.on(\"click\", function() {\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t$field.val(elementsValue).trigger(\"change\");\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\tselectedElement = itemCounter;\r\n\t\t\t\t\t\t\t\t\t\t\t\tselectElement(itemCounter);\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\tconfig.get(\"list\").onClickEvent();\r\n\t\t\t\t\t\t\t\t\t\t\t\tconfig.get(\"list\").onChooseEvent();\r\n\t\t\t\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t\t\t\t\t.mouseover(function() {\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\tselectedElement = itemCounter;\r\n\t\t\t\t\t\t\t\t\t\t\t\tselectElement(itemCounter);\t\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\tconfig.get(\"list\").onMouseOverEvent();\r\n\t\t\t\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t\t\t\t\t.mouseout(function() {\r\n\t\t\t\t\t\t\t\t\t\t\t\tconfig.get(\"list\").onMouseOutEvent();\r\n\t\t\t\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t\t\t\t\t.html(template.build(highlight(elementsValue, phrase), listData[j]));\r\n\t\t\t\t\t\t\t\t\t})();\r\n\r\n\t\t\t\t\t\t\t\t\t$listContainer.append($item);\r\n\t\t\t\t\t\t\t\t\telementsList.push(listData[i]);\r\n\t\t\t\t\t\t\t\t\tcounter += 1;\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\t$elements_container.append($listContainer);\r\n\r\n\t\t\t\t\t\t\tconfig.get(\"list\").onLoadEvent();\r\n\t\t\t\t\t\t});\r\n\r\n\t\t\t\t})();\r\n\r\n\t\t\t\t$field.after($elements_container);\r\n\t\t\t}\r\n\r\n\t\t\tfunction removeContainer() {\r\n\t\t\t\t$field.next(\".\" + consts.getValue(\"CONTAINER_CLASS\")).remove();\r\n\t\t\t}\r\n\r\n\t\t\tfunction highlight(string, phrase) {\r\n\r\n\t\t\t\tif(config.get(\"highlightPhrase\") && phrase !== \"\") {\r\n\t\t\t\t\treturn highlightPhrase(string, phrase);\t\r\n\t\t\t\t} else {\r\n\t\t\t\t\treturn string;\r\n\t\t\t\t}\r\n\t\t\t\t\t\r\n\t\t\t}\r\n\r\n\t\t\tfunction escapeRegExp(str) {\r\n\t\t\t\treturn str.replace(/[\\-\\[\\]\\/\\{\\}\\(\\)\\*\\+\\?\\.\\\\\\^\\$\\|]/g, \"\\\\$&\");\r\n \t\t\t}\r\n\r\n\t\t\tfunction highlightPhrase(string, phrase) {\r\n\t\t\t\tvar escapedPhrase = escapeRegExp(phrase);\r\n\t\t\t\treturn (string + \"\").replace(new RegExp(\"(\" + escapedPhrase + \")\", \"gi\") , \"<b>$1</b>\");\r\n\t\t\t}\r\n\r\n\r\n\r\n\t\t}\r\n\t\tfunction getContainerId() {\r\n\t\t\t\r\n\t\t\tvar elementId = $field.attr(\"id\");\r\n\r\n\t\t\telementId = consts.getValue(\"CONTAINER_ID\") + elementId;\r\n\r\n\t\t\treturn elementId;\r\n\t\t}\r\n\t\tfunction bindEvents() {\r\n\r\n\t\t\tbindAllEvents();\r\n\t\t\t\r\n\r\n\t\t\tfunction bindAllEvents() {\r\n\t\t\t\tif (checkParam(\"autocompleteOff\", true)) {\r\n\t\t\t\t\tremoveAutocomplete();\r\n\t\t\t\t}\r\n\r\n\t\t\t\tbindFocusOut();\r\n\t\t\t\tbindKeyup();\r\n\t\t\t\tbindKeydown();\r\n\t\t\t\tbindKeypress();\r\n\t\t\t\tbindFocus();\r\n\t\t\t\tbindBlur();\r\n\t\t\t}\r\n\r\n\t\t\tfunction bindFocusOut() {\r\n\t\t\t\t$field.focusout(function () {\r\n\r\n\t\t\t\t\tvar fieldValue = $field.val(),\r\n\t\t\t\t\t\tphrase;\r\n\r\n\t\t\t\t\tif (!config.get(\"list\").match.caseSensitive) {\r\n\t\t\t\t\t\tfieldValue = fieldValue.toLowerCase();\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tfor (var i = 0, length = elementsList.length; i < length; i += 1) {\r\n\r\n\t\t\t\t\t\tphrase = config.get(\"getValue\")(elementsList[i]);\r\n\t\t\t\t\t\tif (!config.get(\"list\").match.caseSensitive) {\r\n\t\t\t\t\t\t\tphrase = phrase.toLowerCase();\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tif (phrase === fieldValue) {\r\n\t\t\t\t\t\t\tselectedElement = i;\r\n\t\t\t\t\t\t\tselectElement(selectedElement);\r\n\t\t\t\t\t\t\treturn;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t}\r\n\r\n\t\t\tfunction bindKeyup() {\r\n\t\t\t\t$field\r\n\t\t\t\t.off(\"keyup\")\r\n\t\t\t\t.keyup(function(event) {\r\n\r\n\t\t\t\t\tswitch(event.keyCode) {\r\n\r\n\t\t\t\t\t\tcase 27:\r\n\r\n\t\t\t\t\t\t\thideContainer();\r\n\t\t\t\t\t\t\tloseFieldFocus();\r\n\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\t\tcase 38:\r\n\r\n\t\t\t\t\t\t\tevent.preventDefault();\r\n\r\n\t\t\t\t\t\t\tif(elementsList.length > 0 && selectedElement > 0) {\r\n\r\n\t\t\t\t\t\t\t\tselectedElement -= 1;\r\n\r\n\t\t\t\t\t\t\t\t$field.val(config.get(\"getValue\")(elementsList[selectedElement]));\r\n\r\n\t\t\t\t\t\t\t\tselectElement(selectedElement);\r\n\r\n\t\t\t\t\t\t\t}\t\t\t\t\t\t\r\n\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\t\tcase 40:\r\n\r\n\t\t\t\t\t\t\tevent.preventDefault();\r\n\r\n\t\t\t\t\t\t\tif(elementsList.length > 0 && selectedElement < elementsList.length - 1) {\r\n\r\n\t\t\t\t\t\t\t\tselectedElement += 1;\r\n\r\n\t\t\t\t\t\t\t\t$field.val(config.get(\"getValue\")(elementsList[selectedElement]));\r\n\r\n\t\t\t\t\t\t\t\tselectElement(selectedElement);\r\n\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\t\tdefault:\r\n\r\n\t\t\t\t\t\t\tif (event.keyCode > 40 || event.keyCode === 8) {\r\n\r\n\t\t\t\t\t\t\t\tvar inputPhrase = $field.val();\r\n\r\n\t\t\t\t\t\t\t\tif (!(config.get(\"list\").hideOnEmptyPhrase === true && event.keyCode === 8 && inputPhrase === \"\")) {\r\n\r\n\t\t\t\t\t\t\t\t\tif (config.get(\"requestDelay\") > 0) {\r\n\t\t\t\t\t\t\t\t\t\tif (requestDelayTimeoutId !== undefined) {\r\n\t\t\t\t\t\t\t\t\t\t\tclearTimeout(requestDelayTimeoutId);\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\t\t\t\trequestDelayTimeoutId = setTimeout(function () { loadData(inputPhrase);}, config.get(\"requestDelay\"));\r\n\t\t\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t\t\tloadData(inputPhrase);\r\n\t\t\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t\thideContainer();\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t}\r\n\r\n\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t}\r\n\t\t\t\t\r\n\r\n\t\t\t\t\tfunction loadData(inputPhrase) {\r\n\r\n\r\n\t\t\t\t\t\tif (inputPhrase.length < config.get(\"minCharNumber\")) {\r\n\t\t\t\t\t\t\treturn;\r\n\t\t\t\t\t\t}\r\n\r\n\r\n\t\t\t\t\t\tif (config.get(\"data\") !== \"list-required\") {\r\n\r\n\t\t\t\t\t\t\tvar data = config.get(\"data\");\r\n\r\n\t\t\t\t\t\t\tvar listBuilders = listBuilderService.init(data);\r\n\r\n\t\t\t\t\t\t\tlistBuilders = listBuilderService.updateCategories(listBuilders, data);\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\tlistBuilders = listBuilderService.processData(listBuilders, inputPhrase);\r\n\r\n\t\t\t\t\t\t\tloadElements(listBuilders, inputPhrase);\r\n\r\n\t\t\t\t\t\t\tif ($field.parent().find(\"li\").length > 0) {\r\n\t\t\t\t\t\t\t\tshowContainer();\t\r\n\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\thideContainer();\r\n\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tvar settings = createAjaxSettings();\r\n\r\n\t\t\t\t\t\tif (settings.url === undefined || settings.url === \"\") {\r\n\t\t\t\t\t\t\tsettings.url = config.get(\"url\");\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tif (settings.dataType === undefined || settings.dataType === \"\") {\r\n\t\t\t\t\t\t\tsettings.dataType = config.get(\"dataType\");\r\n\t\t\t\t\t\t}\r\n\r\n\r\n\t\t\t\t\t\tif (settings.url !== undefined && settings.url !== \"list-required\") {\r\n\r\n\t\t\t\t\t\t\tsettings.url = settings.url(inputPhrase);\r\n\r\n\t\t\t\t\t\t\tsettings.data = config.get(\"preparePostData\")(settings.data, inputPhrase);\r\n\r\n\t\t\t\t\t\t\t$.ajax(settings) \r\n\t\t\t\t\t\t\t\t.done(function(data) {\r\n\r\n\t\t\t\t\t\t\t\t\tvar listBuilders = listBuilderService.init(data);\r\n\r\n\t\t\t\t\t\t\t\t\tlistBuilders = listBuilderService.updateCategories(listBuilders, data);\r\n\t\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t\tlistBuilders = listBuilderService.convertXml(listBuilders);\r\n\t\t\t\t\t\t\t\t\tif (checkInputPhraseMatchResponse(inputPhrase, data)) {\r\n\r\n\t\t\t\t\t\t\t\t\t\tlistBuilders = listBuilderService.processData(listBuilders, inputPhrase);\r\n\r\n\t\t\t\t\t\t\t\t\t\tloadElements(listBuilders, inputPhrase);\t\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\t\t\tif (listBuilderService.checkIfDataExists(listBuilders) && $field.parent().find(\"li\").length > 0) {\r\n\t\t\t\t\t\t\t\t\t\tshowContainer();\t\r\n\t\t\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t\t\thideContainer();\r\n\t\t\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\t\t\tconfig.get(\"ajaxCallback\")();\r\n\r\n\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t\t.fail(function() {\r\n\t\t\t\t\t\t\t\t\tlogger.warning(\"Fail to load response data\");\r\n\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t\t.always(function() {\r\n\r\n\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\r\n\r\n\t\t\t\t\t\tfunction createAjaxSettings() {\r\n\r\n\t\t\t\t\t\t\tvar settings = {},\r\n\t\t\t\t\t\t\t\tajaxSettings = config.get(\"ajaxSettings\") || {};\r\n\r\n\t\t\t\t\t\t\tfor (var set in ajaxSettings) {\r\n\t\t\t\t\t\t\t\tsettings[set] = ajaxSettings[set];\r\n\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\treturn settings;\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tfunction checkInputPhraseMatchResponse(inputPhrase, data) {\r\n\r\n\t\t\t\t\t\t\tif (config.get(\"matchResponseProperty\") !== false) {\r\n\t\t\t\t\t\t\t\tif (typeof config.get(\"matchResponseProperty\") === \"string\") {\r\n\t\t\t\t\t\t\t\t\treturn (data[config.get(\"matchResponseProperty\")] === inputPhrase);\r\n\t\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\t\tif (typeof config.get(\"matchResponseProperty\") === \"function\") {\r\n\t\t\t\t\t\t\t\t\treturn (config.get(\"matchResponseProperty\")(data) === inputPhrase);\r\n\t\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\t\treturn true;\r\n\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\treturn true;\r\n\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t}\r\n\r\n\r\n\t\t\t\t});\r\n\t\t\t}\r\n\r\n\t\t\tfunction bindKeydown() {\r\n\t\t\t\t$field\r\n\t\t\t\t\t.on(\"keydown\", function(evt) {\r\n\t        \t\t    evt = evt || window.event;\r\n\t        \t\t    var keyCode = evt.keyCode;\r\n\t        \t\t    if (keyCode === 38) {\r\n\t        \t\t        suppressKeypress = true; \r\n\t        \t\t        return false;\r\n\t        \t\t    }\r\n\t\t        \t})\r\n\t\t\t\t\t.keydown(function(event) {\r\n\r\n\t\t\t\t\t\tif (event.keyCode === 13 && selectedElement > -1) {\r\n\r\n\t\t\t\t\t\t\t$field.val(config.get(\"getValue\")(elementsList[selectedElement]));\r\n\r\n\t\t\t\t\t\t\tconfig.get(\"list\").onKeyEnterEvent();\r\n\t\t\t\t\t\t\tconfig.get(\"list\").onChooseEvent();\r\n\r\n\t\t\t\t\t\t\tselectedElement = -1;\r\n\t\t\t\t\t\t\thideContainer();\r\n\r\n\t\t\t\t\t\t\tevent.preventDefault();\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t});\r\n\t\t\t}\r\n\r\n\t\t\tfunction bindKeypress() {\r\n\t\t\t\t$field\r\n\t\t\t\t.off(\"keypress\");\r\n\t\t\t}\r\n\r\n\t\t\tfunction bindFocus() {\r\n\t\t\t\t$field.focus(function() {\r\n\r\n\t\t\t\t\tif ($field.val() !== \"\" && elementsList.length > 0) {\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\tselectedElement = -1;\r\n\t\t\t\t\t\tshowContainer();\t\r\n\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\r\n\t\t\t\t});\r\n\t\t\t}\r\n\r\n\t\t\tfunction bindBlur() {\r\n\t\t\t\t$field.blur(function() {\r\n\t\t\t\t\tsetTimeout(function() { \r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\tselectedElement = -1;\r\n\t\t\t\t\t\thideContainer();\r\n\t\t\t\t\t}, 250);\r\n\t\t\t\t});\r\n\t\t\t}\r\n\r\n\t\t\tfunction removeAutocomplete() {\r\n\t\t\t\t$field.attr(\"autocomplete\",\"off\");\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tfunction showContainer() {\r\n\t\t\t$container.trigger(\"show.eac\");\r\n\t\t}\r\n\r\n\t\tfunction hideContainer() {\r\n\t\t\t$container.trigger(\"hide.eac\");\r\n\t\t}\r\n\r\n\t\tfunction selectElement(index) {\r\n\t\t\t\r\n\t\t\t$container.trigger(\"selectElement.eac\", index);\r\n\t\t}\r\n\r\n\t\tfunction loadElements(list, phrase) {\r\n\t\t\t$container.trigger(\"loadElements.eac\", [list, phrase]);\r\n\t\t}\r\n\r\n\t\tfunction loseFieldFocus() {\r\n\t\t\t$field.trigger(\"blur\");\r\n\t\t}\r\n\r\n\r\n\t};\r\n\tscope.eacHandles = [];\r\n\r\n\tscope.getHandle = function(id) {\r\n\t\treturn scope.eacHandles[id];\r\n\t};\r\n\r\n\tscope.inputHasId = function(input) {\r\n\r\n\t\tif($(input).attr(\"id\") !== undefined && $(input).attr(\"id\").length > 0) {\r\n\t\t\treturn true;\r\n\t\t} else {\r\n\t\t\treturn false;\r\n\t\t}\r\n\r\n\t};\r\n\r\n\tscope.assignRandomId = function(input) {\r\n\r\n\t\tvar fieldId = \"\";\r\n\r\n\t\tdo {\r\n\t\t\tfieldId = \"eac-\" + Math.floor(Math.random() * 10000);\t\t\r\n\t\t} while ($(\"#\" + fieldId).length !== 0);\r\n\t\t\r\n\t\telementId = scope.consts.getValue(\"CONTAINER_ID\") + fieldId;\r\n\r\n\t\t$(input).attr(\"id\", fieldId);\r\n \r\n\t};\r\n\r\n\tscope.setHandle = function(handle, id) {\r\n\t\tscope.eacHandles[id] = handle;\r\n\t};\r\n\r\n\r\n\treturn scope;\r\n\r\n})(EasyAutocomplete || {});\r\n\r\n(function($) {\r\n\r\n\t$.fn.easyAutocomplete = function(options) {\r\n\r\n\t\treturn this.each(function() {\r\n\t\t\tvar $this = $(this),\r\n\t\t\t\teacHandle = new EasyAutocomplete.main($this, options);\r\n\r\n\t\t\tif (!EasyAutocomplete.inputHasId($this)) {\r\n\t\t\t\tEasyAutocomplete.assignRandomId($this);\r\n\t\t\t}\r\n\r\n\t\t\teacHandle.init();\r\n\r\n\t\t\tEasyAutocomplete.setHandle(eacHandle, $this.attr(\"id\"));\r\n\r\n\t\t});\r\n\t};\r\n\r\n\t$.fn.getSelectedItemIndex = function() {\r\n\r\n\t\tvar inputId = $(this).attr(\"id\");\r\n\r\n\t\tif (inputId !== undefined) {\r\n\t\t\treturn EasyAutocomplete.getHandle(inputId).getSelectedItemIndex();\r\n\t\t}\r\n\r\n\t\treturn -1;\r\n\t};\r\n\r\n\t$.fn.getItems = function () {\r\n\r\n\t\tvar inputId = $(this).attr(\"id\");\r\n\r\n\t\tif (inputId !== undefined) {\r\n\t\t\treturn EasyAutocomplete.getHandle(inputId).getItems();\r\n\t\t}\r\n\r\n\t\treturn -1;\r\n\t};\r\n\r\n\t$.fn.getItemData = function(index) {\r\n\r\n\t\tvar inputId = $(this).attr(\"id\");\r\n\r\n\t\tif (inputId !== undefined && index > -1) {\r\n\t\t\treturn EasyAutocomplete.getHandle(inputId).getItemData(index);\r\n\t\t}\r\n\r\n\t\treturn -1;\r\n\t};\r\n\r\n\t$.fn.getSelectedItemData = function() {\r\n\r\n\t\tvar inputId = $(this).attr(\"id\");\r\n\r\n\t\tif (inputId !== undefined) {\r\n\t\t\treturn EasyAutocomplete.getHandle(inputId).getSelectedItemData();\r\n\t\t}\r\n\r\n\t\treturn -1;\r\n\t};\r\n\r\n})(jQuery);\r\n"]},"metadata":{},"sourceType":"module"}